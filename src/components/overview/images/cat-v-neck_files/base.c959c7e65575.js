function ThreadlessNav(){this.init()}function Exclusions(){this.$=$().jquery?$:jQuery,this.modal()}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return n==null?"":decodeURIComponent(n[1].replace(/\+/g," "))}function initiatePopup(){$(document).on("click",".th-popup",function(e){var t=575,n=400,r=($(window).width()-t)/2,i=($(window).height()-n)/2,s=this.href,o="status=1,width="+t+",height="+n+",top="+i+",left="+r;return window.open(s,"th-share-popup",o),!1})}function attach_notify_anonymous_notifications_last_updated(e){$(".hitexpand").one("click",function(){$(".msg-bug").remove();if(e.headers["X-Unread-Count"]>0){for(var t=0,n=e.data.length;t<n;t++)e.data[t]["new"]=!1;e.headers["X-Unread-Count"]=0,sessionStorage.setItem("anonymousNotifications",JSON.stringify(e))}})}function attach_notify_user_notifications_last_updated(e){$(".hitexpand").one("click",function(){$(".msg-bug").remove(),loom.logInPromise.done(function(){$update_last_notified_promise=loom.put("/user/notification-count"),$update_last_notified_promise.fail(function(){console.log("LastNotified update failed")})}),loom.logInPromise.fail(function(){console.log("Loom Login for LastNotified failed")})})}function attach_load_more_notifications(e,t){var n=0;$(".active-user .showmore").click(function(){$(".active-user .showmore").html('<img src="'+t+'static/imgs/global/loading-v.gif" alt=""/>'),loom.logInPromise.always(function(){n++,$notifications_promise=loom.get("/users/"+e+"/notifications-v2",{per_page:10,page:n,envelope:1}),$notifications_promise.then(function(e,t,n){if(e&&e.data&&e.data.length>0){var r=Handlebars.compile($("#notification-entries").html());$(".notifications-list .notifications").append(r(e)),$(".active-user .showmore").html('<span class="lm showmore"><em>Load More</em></span>'),notification_image_ratio()}else $(".active-user .showmore").replaceWith('<span class="nm showmore"><em>No more posts to show</em></span>')})})})}function notification_image_ratio(){$(".notifications-list .notifications .design-image-wrapper:not(.init-ratio) .design-image").each(function(){var e=$(this);e.closest(".design-image-wrapper").addClass("init-ratio");var t=new Image;t.src=e.prop("src"),t.onload=function(){if(t.width==t.height){var n=e.closest(".design-image-wrapper");n.addClass("design-image-wrapper-square")}}})}function get_notifications(e){var t=sessionStorage.getItem("anonymousNotifications"),n;e===null&&t!==null&&t!==undefined?(n=JSON.parse(t),notification_success(n),attach_notify_anonymous_notifications_last_updated(n)):loom.logInPromise.always(function(){$notifications_promise=loom.get("/users/"+e+"/notifications-v2",{per_page:10,page:0,envelope:1}),$notifications_promise.then(function(t,n,r){notification_success(t),e===null?(sessionStorage.setItem("anonymousNotifications",JSON.stringify(t)),attach_notify_anonymous_notifications_last_updated(t)):attach_notify_user_notifications_last_updated(t)})})}function notification_success(e){var t=e.headers["X-Unread-Count"],n=e.headers["X-Is-Anonymous"];if($("#notification-entries").length>0){var r=Handlebars.compile($("#notification-entries").html());$("<ul/>",{"class":"notifications",html:r(e)}).appendTo(".activity-stream .notifications-list"),t>0&&$(".activity-stream .hitexpand").append('<span class="msg-bug">'+t+"</span>"),t>=10&&$(".activity-stream .hitexpand").append('<span class="msg-bug">10+</span>'),n&&n!="False"?($(".showmore").hide(),$(".notifications-list").css({"padding-bottom":0})):e&&e.data&&e.data.length>=9&&$(".showmore").html("<em>Load More</em>"),e&&e.data&&e.data.length===0&&($(".notifications-list, .showmore").addClass("empty"),$(".showmore").replaceWith('<span class="nm showmore"><em>You have no new notifications.</em></span>')),notification_image_ratio()}}function notification_error(e,t,n){window.console&&console.log(t,n,e.responseText)}window.Modernizr=function(e,t,n){function L(e){f.cssText=e}function A(e,t){return L(p.join(e+";")+(t||""))}function O(e,t){return typeof e===t}function M(e,t){return!!~(""+e).indexOf(t)}function _(e,t){for(var r in e){var i=e[r];if(!M(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function D(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:O(s,"function")?s.bind(r||t):s}return!1}function P(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return O(t,"string")||O(t,"undefined")?_(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),D(i,t,n))}function H(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.6.1",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l=t.createElement("div"),c=t.body,h=c?c:t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),l.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),l.id=u,(c?l:h).innerHTML+=s,h.appendChild(l),c||(h.style
.background="",o.appendChild(h)),a=n(l,e),c?l.parentNode.removeChild(l):h.parentNode.removeChild(h),!!a},N=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=O(i[r],"function"),O(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),C={}.hasOwnProperty,k;!O(C,"undefined")&&!O(C.call,"undefined")?k=function(e,t){return C.call(e,t)}:k=function(e,t){return t in e&&O(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return P("flexWrap")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!O(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!P("indexedDB",e)},y.hashchange=function(){return N("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return L("background-color:rgba(150,255,150,.5)"),M(f.backgroundColor,"rgba")},y.hsla=function(){return L("background-color:hsla(120,40%,100%,.5)"),M(f.backgroundColor,"rgba")||M(f.backgroundColor,"hsla")},y.multiplebgs=function(){return L("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return P("backgroundSize")},y.borderimage=function(){return P("borderImage")},y.borderradius=function(){return P("borderRadius")},y.boxshadow=function(){return P("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return A("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return P("animationName")},y.csscolumns=function(){return P("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return L((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),M(f.backgroundImage,"gradient")},y.cssreflections=function(){return P("boxReflect")},y.csstransforms=function(){return!!P("transform")},y.csstransforms3d=function(){var e=!!P("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return P("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(['#modernizr:after{content:"',c,'";visibility:hidden}'].join(""),function(t){e=t.offsetHeight>=1}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var B in y)k(y,B)&&(x=B.toLowerCase(),i[x]=y[B](),E.push((i[x]?"":"no-")+x));return i.input||H(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)k(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},L(""),a=l=null,function(e,t){function l(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+
t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function c(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function h(e){var t=a[e[o]];return t||(t={},u++,e[o]=u,a[u]=t),t}function p(e,n,s){n||(n=t);if(f)return n.createElement(e);s||(s=h(n));var o;return s.cache[e]?o=s.cache[e].cloneNode():i.test(e)?o=(s.cache[e]=s.createElem(e)).cloneNode():o=s.createElem(e),o.canHaveChildren&&!r.test(e)?s.frag.appendChild(o):o}function d(e,n){e||(e=t);if(f)return e.createDocumentFragment();n=n||h(e);var r=n.frag.cloneNode(),i=0,s=c(),o=s.length;for(;i<o;i++)r.createElement(s[i]);return r}function v(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?p(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function m(e){e||(e=t);var n=h(e);return g.shivCSS&&!s&&!n.hasCSS&&(n.hasCSS=!!l(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(e,n),e}var n=e.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,s,o="_html5shiv",u=0,a={},f;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,f=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){s=!0,f=!0}})();var g={elements:n.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:n.shivCSS!==!1,supportsUnknownElements:f,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:m,createElement:p,createDocumentFragment:d};e.html5=g,m(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.hasEvent=N,i.testProp=function(e){return _([e])},i.testAllProps=P,i.testStyles=T,i.prefixed=function(e,t,n){return t?P(e,t,n):P(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(
){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},document.cookie="__idcontext=;path=/;domain=.threadless.com;expires=Thu, 01 Jan 1970 00:00:01 GMT;",ThreadlessNav.prototype.init=function(){$("html").removeClass("no-js").addClass("js"),$_on="_is-on",this.$mobileNav=$("[data-mobile-nav]"),this.$mobileSubav=$("[data-navlink-subnav]"),this.burgerMenu()},ThreadlessNav.prototype.navlinkSubnav=function(){var e=this,t="",n=e.$mobileSubav.filter(function(){return $(this).data("navlink-subnav")==="target"});$('[data-navlink-subnav="trigger"]').on("click",function(e){e.preventDefault(),$('[data-navlink-subnav="target"]').removeClass($_on),thisSubnav=$(this).closest("a").data("navlink-subnav-label"),thisSubnav!=t?($('ul[data-navlink-subnav-label="'+thisSubnav+'"]').addClass($_on),t=thisSubnav):t=""})},ThreadlessNav.prototype.burgerMenu=function(e){function o(){$(s).height("")}var t=this,n=t.$mobileNav.filter(function(){return $(this).data("mobile-nav")==="trigger"}),r=t.$mobileNav.filter(function(){return $(this).data("mobile-nav")==="target"}),i=t.$mobileNav.filter(function(){return $(this).data("mobile-nav")==="slide"}),s=$(i).filter(function(){return $(this).attr("role")==="main"});e?($(n).add(i).removeClass($_on),o()):$(n).off("click").on("click",function(e){e.preventDefault(),$(this).add(i).toggleClass($_on),$(".burgerMenu").length||($(r).clone().addClass("burgerMenu").appendTo("body"),r=$("body").find(".burgerMenu"),t.navlinkSubnav()),$(r).toggleClass($_on);if($(s).hasClass($_on)){var n=0;$(r).children().each(function(){n+=$(this).outerHeight(!0)}),$(s).height(n)}else o()})},ThreadlessNav.prototype.timesince=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;if(typeof e=="string"){p=(new RegExp("(\\d{4})/(\\d{2})/(\\d{2})")).exec(e);if(p===null){u=(new RegExp("(\\d{2})/(\\d{2})/(\\d{4})")).exec(e);if(u===null)return e;e=new Date(u[3],u[1]-1,u[2])}else e=new Date(p[1],p[2]-1,p[3])}i=(Date.now()-e)/1e3;if(i>0){o=function(e,t){return function(n){return n===1?e:t}},t=[[31536e3,o("year","years")],[2592e3,o("month","months")],[604800,o("week","weeks")],[9e4,o("day","days")],[3600,o("hour","hours")],[60,o("minute","minutes")]];for(s=d=0,v=t.length;d<v;s=++d){m=t[s],c=m[0],a=m[1],n=Math.floor(Math.abs(i/c));if(n!==0)break}return l=""+n+"  "+a(n),s+1<t.length&&(g=t[s+1],h=g[0],f=g[1],r=Math.floor(Math.abs((i-c*n)/h)),r!==0&&(l+=", "+r+" "+f(r))),l}return"0 minutes"},$(function(){threadlessnav=new ThreadlessNav}),$(function(){Modernizr.input.placeholder||($(this).find("[placeholder]").each(function(){$(this).val()===""&&$(this).val($(this).attr("placeholder"))}),$("[placeholder]").focus(function(){$(this).val()==$(this).attr("placeholder")&&($(this).val(""),$(this).removeClass("placeholder"))}).blur(function(){if($(this).val()===""||$(this).val()==$(this).attr("placeholder"))$(this).val($(this).attr("placeholder")),$(this).addClass("placeholder")}),$("[placeholder]").closest("form").submit(function(){$(this).find("[placeholder]").each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")})}))}),Exclusions.prototype.modal=function(){var e=this,t=e.$(".exclusions"),n="More Info",r="Select Postal Shipping at checkout, and we&rsquo;ll upgrade your order to Standard Ground. Excludes PO boxes and other addresses that cannot accept UPS deliveries.",i="exclusions_modal",s='<div id="'+i+'"><h5>'+n+'</h5><a class="close" href="#">Close</a><p>'+r+"</p></div>";t.on("click",function(t){t.preventDefault(),e.$("#"+i).remove(),e.$("body").append(e.$(s)).show(),e.$("#"+i+" .close").click(function(t){t.preventDefault(),e.$("#"+i).remove()})}),e.$(document).keyup(function(t){t.keyCode==27&&e.$("#"+i).remove()})},$().jquery?$(function(){var e=new Exclusions}):jQuery(function(){var e=new Exclusions}),$(function(){$(".delete_form").submit(function(){return confirm("Do you really want to delete this post?")})}),$(function(){$(".delete_comment").click(function(){return confirm("Do you really want to delete this comment?")})}),$(function(){var e=$("#cart_count");e.length&&$.get("/cart-summary",function(t){t&&t.count!==undefined&&e.text(t.count)},"json")}),
/*!
* FitVids 1.0.3
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/
function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],s="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";r.className="fit-vids-style",r.id="fit-vids-style",r.style.display="none",r.innerHTML=s,i.parentNode.insertBefore(r,i)}return t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r=r.not("object object"),r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%"),t.removeAttr("height")
.removeAttr("width")})})}}(window.jQuery||window.Zepto),$(document).ready(initiatePopup),$(document).ready(function(){$(".nls-avatar").on("click",function(e){e.preventDefault()})});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};!function(e){"use strict";function r(){e(".dropdown-backdrop").remove(),e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",r),s.toggleClass("open")),n.focus(),!1},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this),n.preventDefault(),n.stopPropagation();if(r.is(".disabled, :disabled"))return;return u=i(r),a=u.hasClass("open"),!a||a&&n.keyCode==27,n.which==27&&u.find(t).focus(),r.click()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",r).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),function(e,t,n){var r=e();e.fn.dropdownHover=function(n){return r=r.add(this.parent()),this.each(function(){var s=e(this),o=s.parent(),u={delay:300,instantlyCloseOthers:!0},a={delay:e(this).data("delay"),instantlyCloseOthers:e(this).data("close-others")},f=e.extend(!0,{},u,n,a),l;o.hover(function(e){if(!o.hasClass("open")&&!s.is(e.target))return!0;i&&(f.instantlyCloseOthers===!0&&r.removeClass("open"),t.clearTimeout(l),o.addClass("open"))},function(){i&&(l=t.setTimeout(function(){o.removeClass("open")},f.delay))}),s.hover(function(){i&&(f.instantlyCloseOthers===!0&&r.removeClass("open"),t.clearTimeout(l),o.addClass("open"))}),o.find(".dropdown-submenu").each(function(){var n=e(this),r;n.hover(function(){i&&(t.clearTimeout(r),n.children(".dropdown-menu").show(),n.siblings().children(".dropdown-menu").hide())},function(){var e=n.children(".dropdown-menu");i?r=t.setTimeout(function(){e.hide()},f.delay):e.hide()})})})};var i=!1,s={hits:0,x:null,y:null};e(document).ready(function(){e('[data-hover="dropdown"]').dropdownHover(),e(document).mousemove(function(t){s.hits++,s.hits>20||Math.abs(t.pageX-s.x)+Math.abs(t.pageY-s.y)<4?(e(this).unbind(t),i=!0):(s.x=t.pageX,s.y=t.pageY)})});var o=".dropdown-submenu:hover>.dropdown-menu{display:none}",u=document.createElement("style");u.type="text/css",u.styleSheet?u.styleSheet.cssText=o:u.appendChild(document.createTextNode(o)),e("head")[0].appendChild(u)}(jQuery,this),$(document).ready(function(){function t(e){e.matches&&($("html").hasClass("touch")?$(".primary-nav a").removeClass("disabled"):$(".primary-nav a").addClass("disabled"))}$("html").hasClass("touch")&&($("#auth_nav a").on("click",function(){$("html").addClass("modal-open")}),$(".close").on("click",function(){$("html").removeClass("modal-open")})),$(".activity-stream a").on("click",function(){return $(this).hasClass("notifications-notice-link")?!0:(activity_position=$(this).offset().left,activity_position<280&&(notification_postion=Math.ceil(activity_position*-1+4),$(".activity-stream .notifications-list").css({left:notification_postion})),$(".activity-stream .notifications-list").toggle(),$(this).toggleClass("open"),$("body").toggleClass("modal-open"),$(this).delay(6e3).queue(function(){$(".notifications li").removeClass("new_true"),$.isFunction($(".modal").modal)&&$(".modal").modal("hide")}),!1)}),$(".user span").on("click",function(){return $(".activity-stream .notifications-list").fadeOut("fast"),$(".active").removeClass("active"),$(".user ul").slideToggle("fast"),$(".primary-nav li").removeClass("open"),!1}),$(".primary-nav a").on("mouseenter",function(){$(".activity-stream .notifications-list").fadeOut("fast"),$(".activity-stream a").removeClass("open")}),$("html").on("click",function(){$(".activity-stream .notifications-list, .user ul"
).fadeOut("fast"),$(".activity-stream a").removeClass("open"),$("body").removeClass("modal-open")}),$(".modal").on("shown",function(){$("body").css("overflow","hidden")}),$(".modal").on("hidden",function(){$("body").css("overflow","visible")}),$(document).keyup(function(e){e.keyCode===27&&$(".activity-stream .notifications-list, .user ul").fadeOut(),$(".activity-stream a").removeClass("open"),$("body").removeClass("modal-open"),$.isFunction($(".modal").modal)&&$(".modal").modal("hide")}),$(".user-menu, .notifications-list, .showmore, .update--bulkPricingModal").click(function(e){e.stopPropagation()});if(window.matchMedia){var e=window.matchMedia("(min-width: 540px)");e.addListener(t),t(e)}}),function(e){function Z(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function et(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function tt(e,n){function i(){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}var r=!0;return ut(function(){return r&&(i(),r=!1),n.apply(this,arguments)},n)}function nt(e,t){return function(n){return lt(e.call(this,n),t)}}function rt(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function it(){}function st(e){xt(e),ut(this,e)}function ot(e){var t=mt(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._bubble()}function ut(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function at(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&v.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ft(e){return e<0?Math.ceil(e):Math.floor(e)}function lt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function ct(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&on(e,"Date",sn(e,"Date")+o*r),u&&rn(e,sn(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function ht(e){return Object.prototype.toString.call(e)==="[object Array]"}function pt(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function dt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&yt(e[o])!==yt(t[o]))&&s++;return s+i}function vt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=X[e]||V[t]||t}return e}function mt(e){var t={},n,r;for(r in e)e.hasOwnProperty(r)&&(n=vt(r),n&&(t[n]=e[r]));return t}function gt(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t.fn._lang[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t.fn._lang,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function yt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function bt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function wt(e,n,r){return Zt(t([e,11,31+n-r]),n,r).week}function Et(e){return St(e)?366:365}function St(e){return e%4===0&&e%100!==0||e%400===0}function xt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[a]<0||e._a[a]>11?a:e._a[f]<1||e._a[f]>bt(e._a[u],e._a[a])?f:e._a[l]<0||e._a[l]>23?l:e._a[c]<0||e._a[c]>59?c:e._a[h]<0||e._a[h]>59?h:e._a[p]<0||e._a[p]>999?p:-1,e._pf._overflowDayOfYear&&(t<u||t>f)&&(t=f),e._pf.overflow=t)}function Tt(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function Nt(e){return e?e.toLowerCase().replace("_","-"):e}function Ct(e,n){return n._isUTC?t(e).zone(n._offset||0):t(e).local()}function kt(e,t){return t.abbr=e,d[e]||(d[e]=new it),d[e].set(t),d[e]}function Lt(e){delete d[e]}function At(e){var n=0,r,i,s,o,u=function(e){if(!d[e]&&m)try{require("./lang/"+e)}catch(t){}return d[e]};if(!e)return t.fn._lang;if(!ht(e)){i=u(e);if(i)return i;e=[e]}while(n<e.length){o=Nt(e[n]).split("-"),r=o.length,s=Nt(e[n+1]),s=s?s.split("-"):null;while(r>0){i=u(o.slice(0,r).join("-"));if(i)return i;if(s&&s.length>=r&&dt(o,s,!0)>=r-1)break;r--}n++}return t.fn._lang}function Ot(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Mt(e){var t=e.match(w),n,r;for(n=0,r=t.length;n<r;n++)G[t[n]]?t[n]=G[t[n]]:t[n]=Ot(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function _t(e,t){return e.isValid()?(t=Dt(t,e.lang()),$[t]||($[t]=Mt(t)),$[t](e)):e.lang().invalidDate()}function Dt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;E.lastIndex=0;while(n>=0&&E.test(e))e=e.replace(E,r),E.lastIndex=0,n-=1;return e}function Pt(e,t){var n,r=t._strict;switch(e){case"Q":return _;case"DDDD":return P;case"YYYY":case"GGGG":case"gggg":return r?H:T;case"Y":case"G":case"g":return j;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?B:N;case"S":if(r)return _;case"SS":if(r)return D;case"SSS":if(r)return P;case"DDD":return x;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return k;case"a":case"A":return At(t._l)._meridiemParse;case"X":return O;case"Z":case"ZZ":return L;case"T":return A;case"SSSS":return C;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?D:S;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return S;case"Do":return M;default:return n=new RegExp(zt(Ut(e.replace("\\","")),"i")),n}}function Ht(e){e=e||"";var t=
e.match(L)||[],n=t[t.length-1]||[],r=(n+"").match(U)||["-",0,0],i=+(r[1]*60)+yt(r[2]);return r[0]==="+"?-i:i}function Bt(e,n,r){var i,s=r._a;switch(e){case"Q":n!=null&&(s[a]=(yt(n)-1)*3);break;case"M":case"MM":n!=null&&(s[a]=yt(n)-1);break;case"MMM":case"MMMM":i=At(r._l).monthsParse(n),i!=null?s[a]=i:r._pf.invalidMonth=n;break;case"D":case"DD":n!=null&&(s[f]=yt(n));break;case"Do":n!=null&&(s[f]=yt(parseInt(n,10)));break;case"DDD":case"DDDD":n!=null&&(r._dayOfYear=yt(n));break;case"YY":s[u]=t.parseTwoDigitYear(n);break;case"YYYY":case"YYYYY":case"YYYYYY":s[u]=yt(n);break;case"a":case"A":r._isPm=At(r._l).isPM(n);break;case"H":case"HH":case"h":case"hh":s[l]=yt(n);break;case"m":case"mm":s[c]=yt(n);break;case"s":case"ss":s[h]=yt(n);break;case"S":case"SS":case"SSS":case"SSSS":s[p]=yt(("0."+n)*1e3);break;case"X":r._d=new Date(parseFloat(n)*1e3);break;case"Z":case"ZZ":r._useUTC=!0,r._tzm=Ht(n);break;case"dd":case"ddd":case"dddd":i=At(r._l).weekdaysParse(n),i!=null?(r._w=r._w||{},r._w.d=i):r._pf.invalidWeekday=n;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),n&&(r._w=r._w||{},r._w[e]=yt(n));break;case"gg":case"GG":r._w=r._w||{},r._w[e]=t.parseTwoDigitYear(n)}}function jt(e){var n,r,i,s,o,a,f,l;n=e._w,n.GG!=null||n.W!=null||n.E!=null?(o=1,a=4,r=Z(n.GG,e._a[u],Zt(t(),1,4).year),i=Z(n.W,1),s=Z(n.E,1)):(l=At(e._l),o=l._week.dow,a=l._week.doy,r=Z(n.gg,e._a[u],Zt(t(),o,a).year),i=Z(n.w,1),n.d!=null?(s=n.d,s<o&&++i):n.e!=null?s=n.e+o:s=o),f=en(r,i,s,a,o),e._a[u]=f.year,e._dayOfYear=f.dayOfYear}function Ft(e){var t,n,r=[],i,s;if(e._d)return;i=qt(e),e._w&&e._a[f]==null&&e._a[a]==null&&jt(e),e._dayOfYear&&(s=Z(e._a[u],i[u]),e._dayOfYear>Et(s)&&(e._pf._overflowDayOfYear=!0),n=Kt(s,0,e._dayOfYear),e._a[a]=n.getUTCMonth(),e._a[f]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._d=(e._useUTC?Kt:Jt).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}function It(e){var t;if(e._d)return;t=mt(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Ft(e)}function qt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Rt(e){if(e._f===t.ISO_8601){Xt(e);return}e._a=[],e._pf.empty=!0;var n=At(e._l),r=""+e._i,i,s,o,u,a,f=r.length,c=0;o=Dt(e._f,n).match(w)||[];for(i=0;i<o.length;i++)u=o[i],s=(r.match(Pt(u,e))||[])[0],s&&(a=r.substr(0,r.indexOf(s)),a.length>0&&e._pf.unusedInput.push(a),r=r.slice(r.indexOf(s)+s.length),c+=s.length),G[u]?(s?e._pf.empty=!1:e._pf.unusedTokens.push(u),Bt(u,s,e)):e._strict&&!s&&e._pf.unusedTokens.push(u);e._pf.charsLeftOver=f-c,r.length>0&&e._pf.unusedInput.push(r),e._isPm&&e._a[l]<12&&(e._a[l]+=12),e._isPm===!1&&e._a[l]===12&&(e._a[l]=0),Ft(e),xt(e)}function Ut(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function zt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=ut({},e),t._pf=et(),t._f=e._f[i],Rt(t);if(!Tt(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}ut(e,n||t)}function Xt(e){var t,n,r=e._i,i=F.exec(r);if(i){e._pf.iso=!0;for(t=0,n=q.length;t<n;t++)if(q[t][1].exec(r)){e._f=q[t][0]+(i[6]||" ");break}for(t=0,n=R.length;t<n;t++)if(R[t][1].exec(r)){e._f+=R[t][0];break}r.match(L)&&(e._f+="Z"),Rt(e)}else e._isValid=!1}function Vt(e){Xt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function $t(n){var r=n._i,i=g.exec(r);r===e?n._d=new Date:i?n._d=new Date(+i[1]):typeof r=="string"?Vt(n):ht(r)?(n._a=r.slice(0),Ft(n)):pt(r)?n._d=new Date(+r):typeof r=="object"?It(n):typeof r=="number"?n._d=new Date(r):t.createFromInputFallback(n)}function Jt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Kt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Qt(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Gt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Yt(e,t,n){var r=s(Math.abs(e)/1e3),i=s(r/60),o=s(i/60),u=s(o/24),a=s(u/365),f=r<J.s&&["s",r]||i===1&&["m"]||i<J.m&&["mm",i]||o===1&&["h"]||o<J.h&&["hh",o]||u===1&&["d"]||u<=J.dd&&["dd",u]||u<=J.dm&&["M"]||u<J.dy&&["MM",s(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,Gt.apply({},f)}function Zt(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function en(e,t,n,r,i){var s=Kt(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:Et(e-1)+u}}function tn(n){var r=n._i,i=n._f;return r===null||i===e&&r===""?t.invalid({nullInput:!0}):(typeof r=="string"&&(n._i=r=At().preparse(r)),t.isMoment(r)?(n=at(r),n._d=new Date(+r._d)):i?ht(i)?Wt(n):Rt(n):$t(n),new st(n))}function nn(e,n){var r,i;n.length===1&&ht(n[0])&&(n=n[0]);if(!n.length)return t();r=n[0];for(i=1;i<n.length;++i)n[i][e](r)&&(r=n[i]);return r}function rn(e,t){var n;if(typeof t=="string"){t=e.lang().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),bt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function sn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function on(e,t,n){return t==="Month"?rn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function un(e,n){return function(r){return r!=null?(on(this,e,r),t.updateOffset(this,n),this):sn(this,e)}}function an(e){t.duration.fn[e]=function(){return this._data[e]}}function fn(e,n){t.duration.fn["as"+e]=function(){return+this/n}}function ln(e){if(typeof ender!="undefined")return;i=r.moment,e?r.moment=tt("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release."
,t):r.moment=t}var t,n="2.7.0",r=typeof global!="undefined"?global:this,i,s=Math.round,o,u=0,a=1,f=2,l=3,c=4,h=5,p=6,d={},v={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},m=typeof module!="undefined"&&module.exports,g=/^\/?Date\((\-?\d+)/i,y=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,b=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,w=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,E=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,S=/\d\d?/,x=/\d{1,3}/,T=/\d{1,4}/,N=/[+\-]?\d{1,6}/,C=/\d+/,k=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,L=/Z|[\+\-]\d\d:?\d\d/gi,A=/T/i,O=/[\+\-]?\d+(\.\d{1,3})?/,M=/\d{1,2}/,_=/\d/,D=/\d\d/,P=/\d{3}/,H=/\d{4}/,B=/[+-]?\d{6}/,j=/[+-]?\d+/,F=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,I="YYYY-MM-DDTHH:mm:ssZ",q=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],R=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],U=/([\+\-]|\d\d)/gi,z="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),W={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},X={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},V={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},$={},J={s:45,m:45,h:22,dd:25,dm:45,dy:345},K="DDD w W M D d".split(" "),Q="M D H h m s w W".split(" "),G={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return lt(this.year()%100,2)},YYYY:function(){return lt(this.year(),4)},YYYYY:function(){return lt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+lt(Math.abs(e),6)},gg:function(){return lt(this.weekYear()%100,2)},gggg:function(){return lt(this.weekYear(),4)},ggggg:function(){return lt(this.weekYear(),5)},GG:function(){return lt(this.isoWeekYear()%100,2)},GGGG:function(){return lt(this.isoWeekYear(),4)},GGGGG:function(){return lt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return yt(this.milliseconds()/100)},SS:function(){return lt(yt(this.milliseconds()/10),2)},SSS:function(){return lt(this.milliseconds(),3)},SSSS:function(){return lt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+lt(yt(e/60),2)+":"+lt(yt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+lt(yt(e/60),2)+lt(yt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Y=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(K.length)o=K.pop(),G[o+"o"]=rt(G[o],o);while(Q.length)o=Q.pop(),G[o+o]=nt(G[o],2);G.DDDD=nt(G.DDD,3),ut(it.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t.utc([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM"
:n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Zt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=et(),tn(s)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),t.min=function(){var e=[].slice.call(arguments,0);return nn("isBefore",e)},t.max=function(){var e=[].slice.call(arguments,0);return nn("isAfter",e)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=et(),tn(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=y.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:yt(i[f])*s,h:yt(i[l])*s,m:yt(i[c])*s,s:yt(i[h])*s,ms:yt(i[p])*s}):!(i=b.exec(e))||(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}),o=new ot(r),t.isDuration(e)&&e.hasOwnProperty("_lang")&&(o._lang=e._lang),o},t.version=n,t.defaultFormat=I,t.ISO_8601=function(){},t.momentProperties=v,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,n){return J[t]===e?!1:(J[t]=n,!0)},t.lang=function(e,n){var r;return e?(n?kt(Nt(e),n):n===null?(Lt(e),e="en"):d[e]||At(e),r=t.duration.fn._lang=t.fn._lang=At(e),r._abbr):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),At(e)},t.isMoment=function(e){return e instanceof st||e!=null&&e.hasOwnProperty("_isAMomentObject")},t.isDuration=function(e){return e instanceof ot};for(o=Y.length-1;o>=0;--o)gt(Y[o]);t.normalizeUnits=function(e){return vt(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?ut(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(){return t.apply(null,arguments).parseZone()},t.parseTwoDigitYear=function(e){return yt(e)+(yt(e)>68?1900:2e3)},ut(t.fn=st.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?_t(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):_t(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return Tt(this)},isDSTShifted:function(){return this._a?this.isValid()&&dt(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return ut({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var n=_t(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"&&typeof n=="string"?r=t.duration(isNaN(+n)?+e:+n,isNaN(+n)?n:e):typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ct(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"&&typeof n=="string"?r=t.duration(isNaN(+n)?+e:+n,isNaN(+n)?n:e):typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ct(this,r,-1),this},diff:function(e,n,r){var i=Ct(e,this),s=(this.zone()-i.zone())*6e4,o,u;return n=vt(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,u-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:ft(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(e){var n=e||t(),r=Ct(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(s,this))},isLeapYear:function(){return St(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Qt(e,this.lang()),this.add({d:e-t})):t},month:un("Month",!0),startOf:function(e){e=vt(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second"
:this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(e){return e=vt(e),this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+Ct(e,this).startOf(t)},min:tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e<this?this:e}),max:tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e>this?this:e}),zone:function(e,n){var r=this._offset||0;return e==null?this._isUTC?r:this._d.getTimezoneOffset():(typeof e=="string"&&(e=Ht(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,r!==e&&(!n||this._changeInProgress?ct(this,t.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return bt(this.year(),this.month())},dayOfYear:function(e){var n=s((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=Zt(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Zt(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=Zt(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return wt(this.year(),1,4)},weeksInYear:function(){var e=this._lang._week;return wt(this.year(),e.dow,e.doy)},get:function(e){return e=vt(e),this[e]()},set:function(e,t){return e=vt(e),typeof this[e]=="function"&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=At(t),this)}}),t.fn.millisecond=t.fn.milliseconds=un("Milliseconds",!1),t.fn.second=t.fn.seconds=un("Seconds",!1),t.fn.minute=t.fn.minutes=un("Minutes",!1),t.fn.hour=t.fn.hours=un("Hours",!0),t.fn.date=un("Date",!0),t.fn.dates=tt("dates accessor is deprecated. Use date instead.",un("Date",!0)),t.fn.year=un("FullYear",!0),t.fn.years=tt("years accessor is deprecated. Use year instead.",un("FullYear",!0)),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.quarters=t.fn.quarter,t.fn.toJSON=t.fn.toISOString,ut(t.duration.fn=ot.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=ft(e/1e3),r.seconds=i%60,s=ft(i/60),r.minutes=s%60,o=ft(s/60),r.hours=o%24,t+=ft(o/24),r.days=t%30,n+=ft(t/30),r.months=n%12,u=ft(n/12),r.years=u},weeks:function(){return ft(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+yt(this._months/12)*31536e6},humanize:function(e){var t=+this,n=Yt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=vt(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=vt(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(o in W)W.hasOwnProperty(o)&&(fn(o,W[o]),an(o.toLowerCase()));fn("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=yt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),m?module.exports=t:typeof define=="function"&&define.amd?(define("moment",function(e,n,s){return s.config&&s.config()&&s.config().noGlobal===!0&&(r.moment=i),t}),ln(!0)):ln()}.call(this);var THREADLESS=THREADLESS||{};$(document).on("change","#id_published",function(){if($(this).prop("checked")){var e=$(this).parent().data("shop-name");ga("send","event","Artist Shops","Product Management","Publish Shop","Settings Page");var t={shopName:e};Intercom("trackEvent","publish-shop",t)}}),$(document).on("change",'[data-product-update="visibility"]',function(){var e=$(this).data("product-title");if($(this).hasClass("not-visible")){ga("send","event","Artist Shops","Product Update","Design Visibility");var t={productTitle:e};Intercom("trackEvent","publish-design",t)}}),$(document).on("click",".dash--start-promo",function(){ga("send","event","Artist Dash","Promotional Module","Start Promo")}),$(document).on("click",".dash--share-promo",function(){ga("send","event","Artist Dash","Promotional Module","Share Promo")}),$(document
).on("click",".dash--edit-pricing",function(){ga("send","event","Artist Dash","Promotional Module","Editing Pricing")}),$(document).on("click",".dash--managed-prices",function(){ga("send","event","Artist Dash","Promotional Module","Manage Prices")}),$(document).on("click","#dash-add_product",function(){ga("send","event","Artist Dash","Product Module","Create Product")}),$(document).on("click","#dash-view_all_products",function(){ga("send","event","Artist Dash","Product Module","View All")}),$(document).on("click",".dash-edit_product",function(){ga("send","event","Artist Dash","Product Module","Edit A Product")}),$(document).on("click",".dash-promote_product",function(){ga("send","event","Artist Dash","Product Module","Promote Product")}),$(document).on("click",".dash-view_product_on_site",function(){ga("send","event","Artist Dash","Product Module","View Product On Site")}),$(document).on("click",".dash-product_context_menu",function(){ga("send","event","Artist Dash","Product Module","Open Product Context Menu")}),$(document).on("click","#dash-product_publish_shop",function(){ga("send","event","Artist Dash","Product Module","Publish Now")}),$(document).on("click","#dash-product_customize",function(){ga("send","event","Artist Dash","Product Module","Customize Shop")}),$(document).on("click","#dash-product_pricing",function(){ga("send","event","Artist Dash","Product Module","Adjust Pricing")}),$(document).on("click","#dash-product_samples",function(){ga("send","event","Artist Dash","Product Module","Order Samples")}),$(document).on("click","#dash-product_art_files",function(){ga("send","event","Artist Dash","Product Module","Art File Information")}),$(document).on("click","#dash-coupon_copy",function(){ga("send","event","Artist Dash","Coupon Module","Copy Coupon Code")}),$(document).on("click","#dash-coupon_share",function(){ga("send","event","Artist Dash","Coupon Module","Share Coupon")}),$(document).on("click",".dash-blog_link",function(){ga("send","event","Artist Dash","Blog Module","Creative Resources Post")}),$(document).on("click","#dash-shop_updates",function(){ga("send","event","Artist Dash","Shop Updates Module","Create Shop Update")}),$(document).on("click","#dash-help_chat",function(){ga("send","event","Artist Dash","Help Module","Open Chat")}),$(document).on("click","#dash-help_docs",function(){ga("send","event","Artist Dash","Help Module","Help Docs")}),$(document).on("click","#dash-unlock_add_design",function(){ga("send","event","Artist Dash","Unlock Module","Add a Design")}),$(document).on("click","#dash-unlock_publish",function(){ga("send","event","Artist Dash","Unlock Module","Publish Shop")}),$(document).on("click","#dash-customize_visit",function(){ga("send","event","Artist Dash","Customize Module","Visit Shop")}),$(document).on("click","#dash-customize_update_title",function(){ga("send","event","Artist Dash","Customize Module","Update Title")}),$(document).on("click","#dash-customize_layout",function(){ga("send","event","Artist Dash","Customize Module","Customize Layout")}),$(document).on("click","#dash-customize_fonts",function(){ga("send","event","Artist Dash","Customize Module","Customize Fonts")}),$(document).on("click","#dash-customize_colors",function(){ga("send","event","Artist Dash","Customize Module","Customize Colors")}),$(document).on("click","#dash-customize_about",function(){ga("send","event","Artist Dash","Customize Module","About Page")}),$(document).on("click","#dash-customize_payment",function(){ga("send","event","Artist Dash","Customize Module","Payment Info")}),$(document).on("click","#dash-customize_settings",function(){ga("send","event","Artist Dash","Customize Module","Settings")}),$(document).on("click","#dash-collections_view_all",function(){ga("send","event","Artist Dash","Collections Module","View All Collections")}),$(document).on("click","#dash-collections_add",function(){ga("send","event","Artist Dash","Collections Module","Add Collection")}),$(document).on("click",".dash-collections_edit",function(){ga("send","event","Artist Dash","Collections Module","Edit Collection")}),$(document).on("click",".dash-collections_context",function(){ga("send","event","Artist Dash","Collections Module","Open Context Menu")}),$(document).on("click",".dash-collections_promote",function(){ga("send","event","Artist Dash","Collections Module","Promote Collection")}),$(document).on("click",".dash-collections_view",function(){ga("send","event","Artist Dash","Collections Module","View Collection in Shop")}),$(document).on("click","#dash-collections_add_design",function(){ga("send","event","Artist Dash","Collections Module","Add First Design")}),$(document).on("click","#dash-collections_add_photos",function(){ga("send","event","Artist Dash","Collections Module","Add Custom Photos")}),$(document).on("click",".collabTrigger--open-form",function(){ga("send","event","Artist Dash","Split Earnings","Open Collaborator Form")}),$(document).on("click",".collabTrigger--add",function(){ga("send","event","Artist Dash","Split Earnings","Add Collaborator")}),$(document).on("click",".collabTrigger--save",function(){ga("send","event","Artist Dash","Split Earnings","Save Form")}),$(document).on("click",".collabForm-remove",function(){ga("send","event","Artist Dash","Split Earnings","Remove Collaborator")}),$(document).on("click",".downloadList-item #downloadSquare",function(){ga("send","event","Artist Dash","Promo Tools","Download Square")}),$(document).on("click",".downloadList-item #downloadPortait",function(){ga("send","event","Artist Dash","Promo Tools","Download Portrait")}),$(document).on("click",".downloadList-item #downloadLandscape",function(){ga("send","event","Artist Dash","Promo Tools","Download Landscape")}),$(document).on("click",".downloadList-item #downloadAll",function(){ga("send","event","Artist Dash","Promo Tools","Download All")}),$(document).on("click",".promo-tools--help-link",function(){ga("send","event","Artist Dash","Promo Tools","Help Link - Body Copy")}),THREADLESS
.OverviewAnalytics={handleActionClicks:function(e,t,n){var r={styles:n+" - Button",units:n+" - Button",pricing:n+" - Button",add:n+" - Button",view:n,tool:n,menu:"Context Menu - "+n},i=r[e];ga("send","event","PDE - Overview",i,t)},handleStockClicks:function(e,t,n){var r={master:n+" - Text Link",remove:n,bulk:n,unit:n},i=r[e];ga("send","event","PDE - Overview",i,t)}},$(document).on("click","#publish_button",function(){Intercom("update",{published:"True"})}),$(document).on("click",".productPicker-feedback",function(){ga("send","event","Checkout","Enter Cart - Checkout Now")}),$(document).on("click",".brandCart",function(){ga("send","event","Checkout","Enter Cart - Cart Icon")}),ga("require","ec"),$(document).on("click",".cart--controls #cart-checkout-button",function(){ga("ec:setAction","checkout",{step:2,option:"Checkout from Cart"})}),$(document).on("click","#cart-form .order-control--next",function(){var e=$(this).data("next-step");e==="ship-options"?ga("ec:setAction","checkout",{step:3}):e==="billing-fields"?ga("ec:setAction","checkout",{step:4,option:$("form.carty input[name=ship_method]:checked").val()}):e==="payment"&&ga("ec:setAction","checkout",{step:5})}),$(document).on("click","#cart-payment-form .order-control--submit",function(){ga("ec:setAction","checkout",{step:6,option:"Onsite Payment"})}),$(document).on("click","#cart-payment-form .order-control--paypal",function(){ga("ec:setAction","checkout",{step:6,option:"Paypal from Checkout"})}),THREADLESS.ECAnalytics={init:function(){ga("require","ec")},trackImpression:function(e){var t=this,n="[data-ec-trigger]",r="data-ec-impression";$(n).length>0&&($(n).each(function(){var t=$(this);if($(t)[0].hasAttribute(r)&&$(t).attr(r)==="false")return!0;var n=$(t).attr("data-ec-trigger"),i=JSON.parse(n);pageView=i.list,typeof e!="undefined"&&e!==""&&(i.list+=": "+e),ga("ec:addImpression",i)}),ga("send","pageview",pageView,"View "+pageView))},trackViewProduct:function(e){var t=this,n="[data-ec-trigger]";$(n).length>0&&$(n).off("click").on("click",function(){var t=$(this),n=$(t).attr("data-ec-trigger"),r=JSON.parse(n),i=r.list,s=r.brand+" "+r.list;typeof e!="undefined"&&e!==""&&(i+=": "+e),delete r.list,ga("ec:addProduct",r),ga("ec:setAction","click",{list:i}),ga("send","event",s,"View Product Page (Media Card)")})},trackStockSelection:function(e){var t="[data-ec-select]";if($(t).length>0){var n=$(t),r=$(n).attr("data-ec-select"),i=JSON.parse(r);ga("ec:addProduct",i),ga("ec:setAction","detail"),ga("send","event",e,"View Product Page - Stock Selector"),$selectedProductData=i}},trackAddToCart:function(){ga("ec:addProduct",$selectedProductData),ga("ec:setAction","add"),ga("send","event","Checkout","Add to Cart")},trackRemoveFromCart:function(e,t){var n=$(e).attr("data-ec-remove"),t=typeof t!="undefined"?t:!1;if(typeof n=="undefined")return;var r=JSON.parse(n),i=r.name;t&&(r.brand="Unified: "+r.brand),ga("ec:addProduct",r),ga("ec:setAction","remove"),ga("send","event","Cart","Remove",i)}},$("#search-container").on("click",".discover-as",function(){ga("send","event","Search","Discover Artist Shops","Side Nav (enter)")}),$("#search-container").on("click",".discover-as-linkback-mc",function(){ga("send","event","Search","Discover Artist Shops","Visit Shop (Media Card)")}),$("#search-container").on("click",".discover-as-linkback-mc",function(){ga("send","event","Search","Discover Artist Shops","Visit Shop (Title)")}),$("#search-container").on("click",".product-class-name",function(){ga("send","event","Search","Products","Side Nav (enter)")}),$("#search-container").on("click",".discover-as-product-linkback-title",function(){ga("send","event","Search","Discover Artist Shops","View Product Page (Title)")}),$("#search-container").on("click",".threadless-catalog-product-linkback-title",function(){ga("send","event","Search","Threadless Catalog","View Product Page (Title)")}),$("#search-container").on("click","#facets a.btn-checkbox[data-event]",function(e){var t=$(this).data("event");ga("send","event","Search","Filter",t)}),$(document).on("click",".assetGrid-adjust",function(){ga("send","event","In-Browser Editing","Enter Editor","Overview Tab")}),$(document).on("click",".styleAsset-item",function(){ga("send","event","In-Browser Editing","Enter Editor","Department Tab")}),$(document).on("click",".ibe--replace-file",function(){ga("send","event","In-Browser Editing","In Modal","Replace File")}),$(document).on("click",".ibe--reset-file",function(){ga("send","event","In-Browser Editing","In Modal","Reset File")}),$(document).on("click",".assetTool-cta--download",function(){ga("send","event","In-Browser Editing","In Modal","Download Template")}),$(document).on("click",".assetTool-cta--more",function(){ga("send","event","In-Browser Editing","In Modal","Learn More")}),$(document).on("click",".assetTool-save",function(){ga("send","event","In-Browser Editing","In Modal","Save Image")}),$(document).on("click",".assetTool-cta--view",function(){ga("send","event","In-Browser Editing","In Modal","View on Site")}),$(document).on("click",".ibe--undo-changes",function(){ga("send","event","In-Browser Editing","In Modal","Undo Changes")}),$(document).on("click",".ibe--edit-image-file",function(){ga("send","event","In-Browser Editing","Edit Design File","Enter Modal")}),$(document).on("click",".designTool-replace a",function(){ga("send","event","In-Browser Editing","Edit Design File","Replace File")}),$(document).on("click",".ibe--replace-design-file",function(){ga("send","event","In-Browser Editing","Edit Design File","Save Image")}),$(document).on("click",".ibe--replace-file-cancel",function(){ga("send","event","In-Browser Editing","Edit Design File","Cancel")}),$(document).on("change","#design-options-all",function(){$(this).prop("checked")&&ga("send","event","In-Browser Editing","Edit Design File","Update All Products")}),$(document).on("click","#hifive-users-modal .userList-cta a",function(){ga("send","event","Platform Likes","Followers Modal","Visit Profile")}),$(document)
.on("click","#hifive-users-modal .userList-button",function(){ga("send","event","Platform Likes","Followers Modal","Follow Button")}),$(document).on("change","#buy-modal .hiFive-input",function(){$(this).prop("checked")&&ga("send","event","Platform Likes","Card Liked","Buy Now Modal")}),$(document).on("change",".discover-feed .hiFive-input",function(){$(this).prop("checked")&&ga("send","event","Platform Likes","Card Liked","Discover Feed")}),$(document).on("change",".discover-feed .discover-collection",function(){$(this).prop("checked")&&ga("send","event","Platform Likes","Card Liked","Discover Feed - Collection")}),$(document).on("change",".permalink .hiFive-input",function(){$(this).prop("checked")&&ga("send","event","Platform Likes","Card Liked","Permalink - List View")}),$(document).on("change",".discover-shop-permalink .hiFive-input",function(){$(this).prop("checked")&&ga("send","event","Platform Likes","Card Liked","Permalink - Detail View")}),$(document).on("click","#homely .module_shop_logo",function(){ga("send","event","Homely","Featured Shop","Logo")}),$(document).on("click","#homely .module_shop_design",function(){ga("send","event","Homely","Featured Design","Design Image")}),$(document).on("click","#homely .module_shop_design_title",function(){ga("send","event","Homely","Featured Design","Design Title")}),$(document).on("click","#viewCartLink",function(){ga("send","event","Catalog","Conversion Funnel","Threadless - Checkout")}),$(document).on("click","#continueShoppingButton",function(){ga("send","event","Catalog","Conversion Funnel","Threadless - Keep Shopping")}),$(document).on("click","#mpViewCart",function(){ga("send","event","Marketplace","Conversion Funnel","Marketplace - Checkout")}),$(document).on("click","#mpContinueShopping",function(){ga("send","event","Marketplace","Conversion Funnel","Marketplace - Keep Shopping")}),function(e){function n(t,n,r){var s=(t.reduction||t).filter(e.validity.settings.elementSupport),o=[];return s.each(function(){n(this)?o.push(this):i(this,u(r,{field:a(this)}))}),t.reduction=e(o),t}function r(){e.validity.isValidating()&&(e.validity.report.errors++,e.validity.report.valid=!1)}function i(t,n){r(),e.validity.outputs[e.validity.settings.outputMode]&&e.validity.outputs[e.validity.settings.outputMode].raise&&e.validity.outputs[e.validity.settings.outputMode].raise(e(t),n)}function s(t,n){r(),e.validity.outputs[e.validity.settings.outputMode]&&e.validity.outputs[e.validity.settings.outputMode].raiseAggregate&&e.validity.outputs[e.validity.settings.outputMode].raiseAggregate(t,n)}function o(e){var t=0;return e.each(function(){var e=parseFloat(this.value);t+=isNaN(e)?0:e}),t}function u(e,t){for(var n in t)e=e.replace("#{"+n+"}",t[n]);return f(e)}function a(t){var n=e(t),r=e.validity.settings.defaultFieldName;if(n.attr("title")!==undefined&&n.attr("title").length)r=n.attr("title");else if(/^([A-Z0-9][a-z]*)+$/.test(t.id))r=t.id.replace(/([A-Z0-9])[a-z]*/g," $&");else if(/^[a-z0-9_]*$/.test(t.id)){var i=t.id.split("_");for(var s=0;s<i.length;++s)i[s]=f(i[s]);r=i.join(" ")}return r}function f(e){return e.substring?e.substring(0,1).toUpperCase()+e.substring(1,e.length):e}e.extend(e.expr[":"],{email:function(t){return e(t).attr("type")==="email"}});var t={outputMode:"label",cssClass:"error",scrollTo:!1,modalErrorsClickable:!0,defaultFieldName:"This field",elementSupport:":text, :password, textarea, select, :radio, :checkbox, :email",argToString:function(e){return e.getDate?e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear():e}};e.validity={settings:e.extend(t,{}),patterns:{integer:/^\d+$/,date:/^((0?\d)|(1[012]))\/([012]?\d|30|31)\/\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?(\d{1,3},?(\d{3},?)*\d{3}(\.\d{0,2})?|\d{1,3}(\.\d{0,2})?|\.\d{1,2}?)$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]\d+)?$/,zip:/^\d{5}(-\d{4})?$/,phone:/^[2-9]\d{2}-\d{3}-\d{4}$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/
,time12:/^[01]?\d:[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/},messages:{require:"#{field} is required.",match:"#{field} is in an invalid format.",integer:"#{field} must be a positive, whole number.",date:"#{field} must be formatted as a date.",email:"#{field} must be formatted as an email.",usd:"#{field} must be formatted as a US Dollar amount.",url:"#{field} must be formatted as a URL.",number:"#{field} must be formatted as a number.",zip:"#{field} must be formatted as a zipcode ##### or #####-####.",phone:"#{field} must be formatted as a phone number ###-###-####.",guid:"#{field} must be formatted as a guid like {3F2504E0-4F89-11D3-9A0C-0305E82C3301}.",time24:"#{field} must be formatted as a 24 hour time: 23:00.",time12:"#{field} must be formatted as a 12 hour time: 12:00 AM/PM",lessThan:"#{field} must be less than #{max}.",lessThanOrEqualTo:"#{field} must be less than or equal to #{max}.",greaterThan:"#{field} must be greater than #{min}.",greaterThanOrEqualTo:"#{field} must be greater than or equal to #{min}.",range:"#{field} must be between #{min} and #{max}.",tooLong:"#{field} cannot be longer than #{max} characters.",tooShort:"#{field} cannot be shorter than #{min} characters.",nonHtml:"#{field} cannot contain HTML characters.",alphabet:"#{field} contains disallowed characters.",minCharClass:"#{field} cannot have more than #{min} #{charClass} characters.",maxCharClass:"#{field} cannot have less than #{min} #{charClass} characters.",equal:"Values don't match.",distinct:"A value was repeated.",sum:"Values don't add to #{sum}.",sumMax:"The sum of the values must be less than #{max}.",sumMin:"The sum of the values must be greater than #{min}.",radioChecked:"The selected value is not valid.",generic:"Invalid."},charClasses:{alphabetical:/\w/g,numeric:/\d/g,alphanumeric:/[A-Za-z0-9]/g,symbol:/[^A-Za-z0-9]/g},outputs:{},setup:function(t){this.settings=e.extend(this.settings,t)},report:null,isValidating:function(){return!!this.report},start:function(){this.outputs[this.settings.outputMode]&&this.outputs[this.settings.outputMode].start&&this.outputs[this.settings.outputMode].start(),this.report={errors:0,valid:!0}},end:function(){var e=this.report||{errors:0,valid:!0};return this.report=null,this.outputs[this.settings.outputMode]&&this.outputs[this.settings.outputMode].end&&this.outputs[this.settings.outputMode].end(e),e},clear:function(){this.start(),this.end()}},e.fn.extend({validity:function(t){return this.each(function(){if(this.tagName.toLowerCase()=="form"){var n=null;typeof t=="string"?n=function(){e(t).require()}:e.isFunction(t)&&(n=t),t&&e(this).bind("submit",function(){return e.validity.start(),n(),e.validity.end().valid})}})},require:function(t){return n(this,function(t){var n=e(t).val(),r=n.length;return r},t||e.validity.messages.require)},match:function(t,r){return r||(r=e.validity.messages.match,typeof t=="string"&&e.validity.messages[t]&&(r=e.validity.messages[t])),typeof t=="string"&&(t=e.validity.patterns[t]),n(this,e.isFunction(t)?function(e){return!e.value.length||t(e.value)}:function(e){return t.global&&(t.lastIndex=0),!e.value.length||t.test(e.value)},r)},range:function(t,r,i){return n(this,t.getTime&&r.getTime?function(e){var n=new Date(e.value);return n>=new Date(t)&&n<=new Date(r)}:t.substring&&r.substring&&Big?function(e){var n=new Big(e.value);return n.greaterThanOrEqualTo(new Big(t))&&n.lessThanOrEqualTo(new Big(r))}:function(e){var n=parseFloat(e.value);return n>=t&&n<=r},i||u(e.validity.messages.range,{min:e.validity.settings.argToString(t),max:e.validity.settings.argToString(r)}))},greaterThan:function(t,r){return n(this,t.getTime?function(e){return new Date(e.value)>t}:t.substring&&Big?function(e){return(new Big(e.value)).greaterThan(new Big(t))}:function(e){return parseFloat(e.value)>t},r||u(e.validity.messages.greaterThan,{min:e.validity.settings.argToString(t)}))},greaterThanOrEqualTo:function(t,r){return n(this,t.getTime?function(e){return new Date(e.value)>=t}:t.substring&&Big?function(e){return(new Big(e.value)).greaterThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)>=t},r||u(e.validity.messages.greaterThanOrEqualTo,{min:e.validity.settings.argToString(t)}))},lessThan:function(t,r){return n(this,t.getTime?function(e){return new Date(e.value)<t}:t.substring&&Big?function(e){return(new Big(e.value)).lessThan(new Big(t))}:function(e){return parseFloat(e.value)<t},r||u(e.validity.messages.lessThan,{max:e.validity.settings.argToString(t)}))},lessThanOrEqualTo:function(t,r){return n(this,t.getTime?function(e){return new Date(e.value)<=t}:t.substring&&Big?function(e){return(new Big(e.value)).lessThanOrEqualTo(new Big(t))}:function(e){return parseFloat(e.value)<=t},r||u(e.validity.messages.lessThanOrEqualTo,{max:e.validity.settings.argToString(t)}))},maxLength:function(t,r){return n(this,function(e){return e.value.length<=t},r||u(e.validity.messages.tooLong,{max:t}))},minLength:function(t,r){return n(this,function(e){return e.value.length>=t},r||u(e.validity.messages.tooShort,{min:t}))},alphabet:function(t,r){var i=[];return n(this,function(e){for(var n=0;n<e.value.length;++n)if(t.indexOf(e.value.charAt(n))==-1)return i.push(e.value.charAt(n)),!1;return!0},r||u(e.validity.messages.alphabet,{chars:i.join(", ")}))},minCharClass:function(t,r,i){return typeof t=="string"&&(t=t.toLowerCase(),e.validity.charClasses[t]&&(t=e.validity.charClasses[t])),n(this,function(e){return(e.value.match(t)||[]).length>=r},i||u(e.validity.messages.minCharClass,{min:r,charClass:t}))},maxCharClass:function(t,r,i){return typeof t=="string"&&(t=t.toLowerCase(),e.validity.charClasses[t]&&(t=e.validity.charClasses[t])),n(this,function(e){return(e.value.match(t)||[]).length<=r},i||u(e.validity.messages.maxCharClass,{max:r,charClass:t}))},password:function(t,n){return t=e.extend({alphabet:null,minLength:0,maxLength:0,minSymbol:0,minAlphabetical:0,minNumeric:0,minAlphaNumeric:0},t),t.alphabet&&this.alphabet(t.alphabet
),t.minLength&&this.minLength(t.minLength),t.maxLength&&this.maxLength(t.maxLength),t.minSymbol&&this.minCharClass("symbol",t.minSymbol),t.minAlphabetical&&this.minCharClass("alphabetical",t.minAlphabetical),t.minNumeric&&this.minCharClass("numeric",t.minNumeric),t.minAlphanumeric&&this.minCharClass("alphanumeric",t.minAlphanumeric),this},nonHtml:function(t){return n(this,function(t){return e.validity.patterns.nonHtml.test(t.value)},t||e.validity.messages.nonHtml)},equal:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport),i=function(e){return e},o=e.validity.messages.equal;if(r.length){e.isFunction(t)?(i=t,typeof n=="string"&&(o=n)):typeof t=="string"&&(o=t);var u=e.map(r,function(e){return i(e.value)}),a=u[0],f=!0;for(var l in u)u[l]!=a&&(f=!1);f||(s(r,o),this.reduction=e([]))}return this},distinct:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport),i=function(e){return e},o=e.validity.messages.distinct,u=[],a=!0;if(r.length){e.isFunction(t)?(i=t,typeof n=="string"&&(o=n)):typeof t=="string"&&(o=t);var f=e.map(r,function(e){return i(e.value)});for(var l=0;l<f.length;++l)if(f[l].length){for(var c=0;c<u.length;++c)u[c]==f[l]&&(a=!1);u.push(f[l])}a||(s(r,o),this.reduction=e([]))}return this},sum:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport);return r.length&&t!=o(r)&&(s(r,n||u(e.validity.messages.sum,{sum:t})),this.reduction=e([])),this},sumMax:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport);return r.length&&t<o(r)&&(s(r,n||u(e.validity.messages.sumMax,{max:t})),this.reduction=e([])),this},sumMin:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport);return r.length&&t<o(r)&&(s(r,n||u(e.validity.messages.sumMin,{min:t})),this.reduction=e([])),this},radioChecked:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport);r.is(":radio")&&r.find(":checked").val()!=t&&s(r,n||e.validity.messages.radioChecked)},radioNotChecked:function(t,n){var r=(this.reduction||this).filter(e.validity.settings.elementSupport);r.is(":radio")&&r.filter(":checked").val()==t&&s(r,n||e.validity.messages.radioChecked)},checkboxChecked:function(t){var n=(this.reduction||this).filter(e.validity.settings.elementSupport);n.is(":checkbox")&&!n.is(":checked")&&s(n,t||e.validity.messages.radioChecked)},assert:function(t,r){var i=this.reduction||this;if(i.length){if(e.isFunction(t))return n(this,t,r||e.validity.messages.generic);t||(s(i,r||e.validity.messages.generic),this.reduction=e([]))}return this}})}(jQuery),function(e){function t(e){return e.attr("id").length?e.attr("id"):e.attr("name")}e.validity.outputs.label={start:function(){e("label."+e.validity.settings.cssClass).remove()},end:function(t){!t.valid&&e.validity.settings.scrollTo&&(location.hash=e("label."+e.validity.settings.cssClass+":eq(0)").attr("for"))},raise:function(n,r){var i="label."+e.validity.settings.cssClass+"[for='"+t(n)+"']";e(i).length?e(i).text(r):e("<label/>").attr("for",t(n)).addClass(e.validity.settings.cssClass).text(r).click(function(){n.length&&n[0].select()}).insertBefore(n).parent().addClass("error")},raiseAggregate:function(t,n){t.length&&this.raise(e(t.get(t.length-1)),n)}}}(jQuery),function(e){var t="validity-modal-msg",n="body";e.validity.outputs.modal={start:function(){e("."+t).remove()},end:function(n){!n.valid&&e.validity.settings.scrollTo&&(location.hash=e("."+t+":eq(0)").attr("id"))},raise:function(r,i){if(r.length){var s=r.offset(),o=r.get(0),u={left:parseInt(s.left+r.width()+4,10)+"px",top:parseInt(s.top-10,10)+"px"};e("<div/>").addClass(t).css(u).text(i).click(e.validity.settings.modalErrorsClickable?function(){e(this).remove()}:null).appendTo(n)}},raiseAggregate:function(t,n){t.length&&this.raise(e(t.get(t.length-1)),n)}}}(jQuery),function(e){var t=".validity-summary-container",n="validity-erroneous",r="."+n,i="<li/>",s=[];e.validity.outputs.summary={start:function(){e(r).removeClass(n),s=[]},end:function(n){e(t).hide().find("ul").html("");if(s.length){for(var o=0;o<s.length;++o)e(i).text(s[o]).appendTo(t+" ul");e(t).show(),e.validity.settings.scrollTo&&(location.hash=e(r+":eq(0)").attr("id"))}},raise:function(e,t){s.push(t),e.addClass(n)},raiseAggregate:function(e,t){this.raise(e,t)},container:function(){document.write('<div class="validity-summary-container">The form didn\'t submit for the following reason(s):<ul></ul></div>')}}}(jQuery),function(e){"use strict";typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function r(t,n){var i=function(){},s=this,o={autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,deferRequestBy:0,params:{},formatResult:r.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:i,onSearchComplete:i,onSearchError:i,containerClass:"autocomplete-suggestions siteSearch-autocomplete",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return e.value.toLowerCase().indexOf(n)!==-1},paramName:"query",transformResult:function(t){return typeof t=="string"?e.parseJSON(t):t}};s.element=t,s.el=e(t),s.suggestions=[],s.badQueries=[],s.selectedIndex=-1,s.currentValue=s.element.value,s.intervalId=0,s.cachedResponse={},s.onChangeInterval=null,s.onChange=null,s.isLocal=!1,s.suggestionsContainer=null,s.options=e.extend({},o,n),s.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},s.hint=null,s.hintValue="",s.selection=null,s.initialize(),s.setOptions(n)}var t=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};r.utils=t,e.Autocomplete=r,r.formatResult=function(
e,n){var r="("+t.escapeRegExChars(n)+")";return e.value.replace(new RegExp(r,"gi"),"<strong>$1</strong>")},r.prototype={killerFn:null,initialize:function(){var t=this,n="."+t.classes.suggestion,i=t.classes.selected,s=t.options,o;t.element.setAttribute("autocomplete","off"),t.suggestionsContainer=r.utils.createNode(s.containerClass),o=e(t.suggestionsContainer),o.appendTo(s.appendTo),s.width!=="auto"&&o.width(s.width),o.on("mouseover.autocomplete",n,function(){t.activate(e(this).data("index"))}),o.on("mouseout.autocomplete",function(){t.selectedIndex=-1,o.children("."+i).removeClass(i)}),o.on("click.autocomplete",n,function(){t.select(e(this).data("index"))}),t.fixPosition(),t.fixPositionCapture=function(){t.visible&&t.fixPosition()},e(window).on("resize.autocomplete",t.fixPositionCapture),t.el.on("keydown.autocomplete",function(e){t.onKeyPress(e)}),t.el.on("keyup.autocomplete",function(e){t.onKeyUp(e)}),t.el.on("blur.autocomplete",function(){o.is(":hover")||t.onBlur()}),t.el.on("focus.autocomplete",function(){t.onFocus()}),t.el.on("change.autocomplete",function(e){t.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.options.minChars<=e.el.val().length&&e.onValueChange()},onBlur:function(){this.hide()},setOptions:function(t){var n=this,r=n.options;e.extend(r,t),n.isLocal=e.isArray(r.lookup),n.isLocal&&(r.lookup=n.verifySuggestionsFormat(r.lookup)),e(n.suggestionsContainer).css({width:r.width+"px","z-index":r.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,e.currentRequest&&e.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,n,r={},i,s,o;if(t.options.appendTo!=="body")return;n=t.el.offset(),s=[n.left,n.top+t.el.outerHeight()],o=[s[0],s[1]],r.top=o[1]+"px",r.left=o[0]>=1?o[0]+"px":0,e(t.suggestionsContainer).css(r)},isCursorAtEnd:function(){var e=this,t=e.el.val().length,n=e.element.selectionStart,r;return typeof n=="number"?n===t:document.selection?(r=document.selection.createRange(),r.moveStart("character",-t),t===r.text.length):!0},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===n.DOWN&&t.currentValue){t.suggest();return}if(t.disabled||!t.visible)return;switch(e.which){case n.ESC:t.el.val(t.currentValue),t.hide();break;case n.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n.TAB:if(t.hint&&t.options.onHint){t.selectHint();return}break;case n.RETURN:if(t.selectedIndex===-1){t.hide();return}t.select(t.selectedIndex);if(e.which===n.TAB&&t.options.tabDisabled===!1)return;break;case n.UP:t.moveUp();break;case n.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()},onKeyUp:function(e){var t=this;if(t.disabled)return;switch(e.which){case n.UP:case n.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())},onValueChange:function(){var t=this,n=t.options,r=t.el.val(),i=t.getQuery(r),s;t.selection&&(t.selection=null,(n.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=r,t.selectedIndex=-1;if(n.triggerSelectOnValidInput){s=t.findSuggestionIndex(i);if(s!==-1){t.select(s);return}}i.length<n.minChars?t.hide():t.getSuggestions(i)},findSuggestionIndex:function(t){var n=this,r=-1,i=t.toLowerCase();return e.each(n.suggestions,function(e,t){if(t.value.toLowerCase()===i)return r=e,!1}),r},getQuery:function(t){var n=this.options.delimiter,r;return n?(r=t.split(n),e.trim(r[r.length-1])):t},getSuggestionsLocal:function(t){var n=this,r=n.options,i=t.toLowerCase(),s=r.lookupFilter,o=parseInt(r.lookupLimit,10),u;return u={suggestions:e.grep(r.lookup,function(e){return s(e,t,i)})},o&&u.suggestions.length>o&&(u.suggestions=u.suggestions.slice(0,o)),u},getSuggestions:function(t){var n,r=this,i=r.options,s=i.serviceUrl,o,u;i.params[i.paramName]=t,o=i.ignoreParams?null:i.params,r.isLocal?n=r.getSuggestionsLocal(t):(e.isFunction(s)&&(s=s.call(r.element,t)),u=s+"?"+e.param(o||{}),n=r.cachedResponse[u]);if(n&&e.isArray(n.suggestions))r.suggestions=n.suggestions,r.suggest();else if(!r.isBadQuery(t)){if(i.onSearchStart.call(r.element,i.params)===!1)return;r.currentRequest&&r.currentRequest.abort(),e.type(s)==="string"?r.currentRequest=e.ajax({url:s,data:o,type:i.type,dataType:i.dataType}):e.type(s)==="object"&&(r.currentRequest=s),r.currentRequest.done(function(e){var n;r.currentRequest=null,n=i.transformResult(e),r.processResponse(n,t,u),i.onSearchComplete.call(r.element,t,n.suggestions)}).fail(function(e,n,s){i.onSearchError.call(r.element,t,e,n,s)})}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;var t=this.badQueries,n=t.length;while(n--)if(e.indexOf(t[n])===0)return!0;return!1},hide:function(){var t=this;t.visible=!1,t.selectedIndex=-1,e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(this.suggestions.length===0){this.hide();return}var t=this,n=t.options,r=n.formatResult,i=t.getQuery(t.currentValue),s=t.classes.suggestion,o=t.classes.selected,u=e(t.suggestionsContainer),a=n.beforeRender,f="",l,c;if(n.triggerSelectOnValidInput){l=t.findSuggestionIndex(i);if(l!==-1){t.select(l);return}}e.each(t.suggestions,function(e,t){f+='<div class="'+s+'" data-index="'+e+'">'+r(t,i)+"</div>"}),n.width==="auto"&&(c=t.el.outerWidth()-2,u.width(c>0?c:300)),u.html(f),n.autoSelectFirst&&(t.selectedIndex=0,u.children().first().addClass(o)),e.isFunction(a)&&a.call(t.element,u),u.show(),t.visible=!0,t.findBestHint()},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),r=null;if(!n)return;e.each(t.suggestions,function(e,t){var i=t.value.toLowerCase().indexOf(n)===0;return i&&(r=t),!i}),t.signalHint(r)},signalHint:function(t){var n="",r=this;t&&(n=r.currentValue+t.value.substr(r.currentValue
.length)),r.hintValue!==n&&(r.hintValue=n,r.hint=t,(this.options.onHint||e.noop)(n))},verifySuggestionsFormat:function(t){return t.length&&typeof t[0]=="string"?e.map(t,function(e){return{value:e,data:null}}):t},processResponse:function(e,t,n){var r=this,i=r.options;e.suggestions=r.verifySuggestionsFormat(e.suggestions),i.noCache||(r.cachedResponse[n]=e,i.preventBadQueries&&e.suggestions.length===0&&r.badQueries.push(t));if(t!==r.getQuery(r.currentValue))return;r.suggestions=e.suggestions,r.suggest()},activate:function(t){var n=this,r,i=n.classes.selected,s=e(n.suggestionsContainer),o=s.children();return s.children("."+i).removeClass(i),n.selectedIndex=t,n.selectedIndex!==-1&&o.length>n.selectedIndex?(r=o.get(n.selectedIndex),e(r).addClass(i),r):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){var t=this;t.onSelect(e)},moveUp:function(){var t=this;if(t.selectedIndex===-1)return;if(t.selectedIndex===0){e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),t.findBestHint();return}t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;if(e.selectedIndex===e.suggestions.length-1)return;e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,r=n.activate(t),i,s,o,u=25;if(!r)return;i=r.offsetTop,s=e(n.suggestionsContainer).scrollTop(),o=s+n.options.maxHeight-u,i<s?e(n.suggestionsContainer).scrollTop(i):i>o&&e(n.suggestionsContainer).scrollTop(i-n.options.maxHeight+u),n.signalHint(null)},onSelect:function(t){var n=this,r=n.options.onSelect,i=n.suggestions[t];n.currentValue=n.getValue(i.value),n.currentValue!==n.el.val()&&n.el.val(n.currentValue),n.signalHint(null),n.suggestions=[],n.selection=i,e.isFunction(r)&&r.call(n.element,i)},getValue:function(e){var t=this,n=t.options.delimiter,r,i;return n?(r=t.currentValue,i=r.split(n),i.length===1?e:r.substr(0,r.length-i[i.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=function(t,n){var i="autocomplete";return arguments.length===0?this.first().data(i):this.each(function(){var s=e(this),o=s.data(i);typeof t=="string"?o&&typeof o[t]=="function"&&o[t](n):(o&&o.dispose&&o.dispose(),o=new r(this,t),s.data(i,o))})}}),function(e){e.fn.vidOverlay=function(){e(this).find(".video-overlay").click(function(){var t=e(this).next();t.fadeIn("slow");var n=e(t).find("iframe"),r=n.attr("src");n.attr("src",r+"&autoplay=1"),e(this).hide()})}}(jQuery),
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(arguments.length>1&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setMilliseconds(l.getMilliseconds()+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[],p=0,d=h.length;for(;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}}),function(){$(document).ready(function(){var e=$("#facebook_form"),t='<input type="hidden" value="'+$.cookie("THDLSS_uuid")+'" name="uuid">';e.prepend(t)})}();var Handlebars={};(function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";e.registerHelper=function(t,r,s){if(n.call(t)===i){if(s||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(r.not=s),this.helpers[t]=r},e.registerPartial=function(t,r){n.call(t)===i?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t===null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,i){var s=i.fn,o=i.inverse,u=0,a="",f,l=n.call(t);l===r&&(t=t.call(this)),i.data&&(f=e.createFrame(i.data));if(t&&typeof t=="object")if(t instanceof Array)for(var c=t.length;u<c;u++)f&&(f.index=u),a+=s(t[u],{data:f});else for(var h in t)t.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(t[h],{data:f}),u++);return u===0&&(a=o(this)),a}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse
,inverse:n.fn})}),e.registerHelper("with",function(t,i){var s=n.call(t);s===r&&(t=t.call(this));if(!e.Utils.isEmpty(t))return i.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!==null?parseInt(n.data.level,10):1;e.log(r,t)});var s=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],o[a-2][2]==="&");break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[o[a]],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=o[a];break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],o[a]];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.PartialNameNode(new i.StringNode(o[a]));break;case 46:this.$=new i.PartialNameNode(new i.IntegerNode(o[a]));break;case 47:this.$=new i.DataNode(o[a]);break;case 48:this.$=new i.IdNode(o[a]);break;case 49:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 50:this.$=[{part:o[a]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2
,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(
){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:return n.yytext="\\",14;case 1:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 2:return 14;case 3:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 4:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),31;case 23:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return n.yytext=n.yytext.substr(1,n.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=s,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID";var n="",r=[],i=0;for(var s=0,o=t.length;s<o;s++){var u=t[s].part;n+=(t[s].separator||"")+u;if(u===".."||u==="."||u==="this"){if(r.length>0)throw new e.Exception("Invalid path: "+n);u===".."?i++:this.isScoped=!0}else r.push(u)}this.original=n,this.parts=r,this.string=r.join("."),this.depth=i,this.isSimple=t.length===1&&!this.isScoped&&i===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e.original},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.original=this.string=this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(
e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<o.length;n++)this[o[n]]=t[o[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/,l=function(e){return u[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":(t=t.toString(),f.test(t)?t.replace(a,l):t)},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}};var c=e.Compiler=function(){},h=e.JavaScriptCompiler=function(){};c.prototype={compiler:c,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(t){this.options.data=!0;if(t.id.isScoped||t.id.depth)throw new e.Exception("Scoped data references are not supported: "+t.original);this.opcode("lookupData");var n=t.id.parts;for(var r=0,i=n.length;r<i;r++)this.opcode("lookup",n[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r)
,this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var p=function(e){this.value=e};h.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":h.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(g=s.length;this.i<g;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",n;for(var r=0,i=this.source.length;r<i;r++){var s=this.source[r];s.appendToBuffer?n?n=n+"\n    + "+s.content:n=s.content:(n&&(e+="buffer += "+n+";\n  ",n=t),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+r),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+
s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:h,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new p(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r;if(n){var i=this.popStack(!0);if(i instanceof p)r=i.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(s)+" = "+i+"),",r=this.topStack()}}else r=this.topStack();var o=e.call(this,r);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+o+")")):(/^stack/.test(r)||(r=this.nextStack()),this.source.push(r+" = ("+t+o+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof p?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof p?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof p?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var d="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),v=h.RESERVED_WORDS={};for(var m=0,g=d.length;m<g;m++)v[d[m]]=!0;h.isValidJavaScriptVariableName=function(e){return!h.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(t,n){if(t==null||typeof t!="string"&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);n=n||{},"data"in n||(n.data=!0);var r=e.parse(t),i=(new c).compile(r,n);return(new h).compile(i,n)},e.compile=function(n,r){function s(){var i=e.parse(n),s=(new c).compile(i,r),o=(new h).compile(s,r,t,!0);return e.template(o)}if(n==null||typeof n!="string"&&n.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);r=r||{},"data"in r||(r.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?i=e.VM.program(t,n,r):i||(i=this.programs[t]=e.VM.program(t,n)),i},merge:function(t,n){var r=t||n;return t&&n&&(r={},e.Utils.extend(r,n),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=
o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(Handlebars),
/*! jQuery UI - v1.11.4 - 2015-08-26
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
;var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return o?this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=
n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var r=e.widget});var sub=function(e,t){function r(e,t){var n;if(typeof e[t]!="undefined")return e[t];t=t.split("."),n=t.slice(1).join("."),t=t[0];if(n&&typeof e[t]=="object"&&e[t]!==null)return r(e[t],n)}var n=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g;return e.replace?e.replace(n,function(e,n){var i=n.indexOf(".")>-1?r(t,n):t[n];return typeof i=="undefined"?e:i}):e};$.widget("threadless.th_modal",{options:{value:null,prefix:"th",title:"",content:"",visible:!1,width:"500px",close_selector:".th-close-modal",zindex:null,click_outside_closes:!0},_content:"",_wrapper:null,_create:function(){var e=this.options.prefix,t=this.options.content,n=$(this.element).addClass(e+"-modal-wrap"),r=$("<div/>").addClass(e+"-modal-dialog"),i=$("<div/>").addClass(e+"-modal-content").append(t);this.options.zindex&&n.css("z-index",this.options.zindex),r.append(i),n.append(r),this._content=i,this._wrapper=n,this._dialog=r,this.body_class=e+"-modal-open",this.init()},init:function(){var e=this,t=this.options;$(this.element).bind(this.widgetName+"visibleafterchanged",function(t,n){n.current?e._open():e._close()}),$(e.element).bind(e.widgetName+"contentafterchanged",function(t,n){e._content.html(n.current)}),$(e.element).bind(e.widgetName+"widthafterchanged",function(t,n){n.current&&e._dialog.css({"max-width":n.current})}),$(e.element).delegate(e.options.close_selector,"click",function(t){t.preventDefault(),e._setOption("visible",!1)}),t.click_outside_closes&&$(document).mouseup(function(t){var n=e._content;e.option("visible")&&!n.is(t.target)&&n.has(t.target).length===0&&e._setOption("visible",!1)}),e._setOption("width",t.width),t.visible||$(this.element).hide()},_setOption:function(e,t,n){typeof n=="undefined"&&(n=!1);var r={key:e,prev:this.options[e],current:t},i=this._trigger(e+"beforechanged",null,r);if(!i&&!n)return!1;this.options[e]=t,this._trigger(e+"afterchanged",null,r)},_destroy:function(){$(this.element).remove()},_open:function(){$(this.element).fadeIn(),$(this.element).focus(),$("body").addClass(this.body_class)},_close:function(){$(this.element).fadeOut(),$(this.element).blur(),$("body").removeClass(this.body_class)}}),function(e,t,n,r){var i=t.document,s=e(i),o=e(t),u=Array.prototype,a=1.57,f=!0,l=3e4,c=!1,h=navigator.userAgent.toLowerCase(),p=t.location.hash.replace(/#\//,""),d=t.location.protocol=="file:"?"http:":t.location.protocol,v=Math,m=function(){},g=function(){return!1},y=!(t.screen.width>1279&&t.devicePixelRatio==1||t.screen.width>1e3&&t.innerWidth<t.screen.width*.9),b=function(){var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->";while(n[0]);return e>4?e:i.documentMode||r}(),w=function(){return{html:i.documentElement,body:i.body,head:i.getElementsByTagName("head")[0],title:i.title}},E=t.parent!==t.self,S="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",x=function(){var t=[];return e.each(S.split(" "),function(e,n){t.push(n),/_/.test(n)&&t.push(n.replace(/_/g,""))}),t}(),T=function(t){var n;return typeof t!="object"?t:(e.each(t,function(r,i){/^[a-z]+_/.test(r)&&(n="",e.each(r.split("_"),function(e,t){n+=e>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[n]=i,delete t[r])}),t)},N=function(t){return e.inArray(t,x)>-1?n[t.toUpperCase()]:t},C={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return d+"//www.youtube.com/embed/"+this.id},get_thumb:function(e){return d+"//img.youtube.com/vi/"+this.id+"/default.jpg"},get_image:function(e){return d+"//img.youtube.com/vi/"+this.id+"/hqdefault.jpg"}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return d+"//player.vimeo.com/video/"+this.id},getUrl:function(){return d+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(e){return e[0].thumbnail_medium},get_image:function(e){return e
[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return d+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(e){return e.thumbnail_240_url},get_image:function(e){return e.thumbnail_720_url}},_inst:[]},k=function(n,r){for(var i=0;i<C._inst.length;i++)if(C._inst[i].id===r&&C._inst[i].type==n)return C._inst[i];this.type=n,this.id=r,this.readys=[],C._inst.push(this);var s=this;e.extend(this,C[n]),_videoThumbs=function(t){s.data=t,e.each(s.readys,function(e,t){t(s.data)}),s.readys=[]},this.hasOwnProperty("getUrl")?e.getJSON(this.getUrl(),_videoThumbs):t.setTimeout(_videoThumbs,400),this.getMedia=function(e,t,n){n=n||m;var r=this,i=function(n){t(r["get_"+e](n))};try{r.data?i(r.data):r.readys.push(i)}catch(s){n()}}},L=function(e){var t;for(var n in C){t=e&&C[n].reg&&e.match(C[n].reg);if(t&&t.length)return{id:t[2],provider:n}}return!1},A={support:function(){var e=w().html;return!E&&(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen)}(),callback:m,enter:function(e,t,n){this.instance=e,this.callback=t||m,n=n||w().html,n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()},exit:function(e){this.callback=e||m,i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitCancelFullScreen&&i.webkitCancelFullScreen()},instance:null,listen:function(){if(!this.support)return;var e=function(){if(!A.instance)return;var e=A.instance._fullscreen;i.fullscreen||i.mozFullScreen||i.webkitIsFullScreen||i.msFullscreenElement&&i.msFullscreenElement!==null?e._enter(A.callback):e._exit(A.callback)};i.addEventListener("fullscreenchange",e,!1),i.addEventListener("MSFullscreenChange",e,!1),i.addEventListener("mozfullscreenchange",e,!1),i.addEventListener("webkitfullscreenchange",e,!1)}},O=[],M=[],_=!1,D=!1,P=[],H=[],B=function(t){H.push(t),e.each(P,function(e,n){if(n._options.theme==t.name||!n._initialized&&!n._options.theme)n.theme=t,n._init.call(n)})},j=function(){return{clearTimer:function(t){e.each(n.get(),function(){this.clearTimer(t)})},addTimer:function(t){e.each(n.get(),function(){this.addTimer(t)})},array:function(e){return u.slice.call(e,0)},create:function(e,t){t=t||"div";var n=i.createElement(t);return n.className=e,n},removeFromArray:function(t,n){return e.each(t,function(e,r){if(r==n)return t.splice(e,1),!1}),t},getScriptPath:function(t){t=t||e("script:last").attr("src");var n=t.split("/");return n.length==1?"":(n.pop(),n.join("/")+"/")},animate:function(){var r=function(e){var n="transition WebkitTransition MozTransition OTransition".split(" "),r;if(t.opera)return!1;for(r=0;n[r];r++)if(typeof e[n[r]]!="undefined")return n[r];return!1}((i.body||i.documentElement).style),s={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],o={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},u=function(t,n,r){var i={};r=r||"transition",e.each("webkit moz ms o".split(" "),function(){i["-"+this+"-"+r]=n}),t.css(i)},a=function(e){u(e,"none","transition"),n.WEBKIT&&n.TOUCH&&(u(e,"translate3d(0,0,0)","transform"),e.data("revert")&&(e.css(e.data("revert")),e.data("revert",null)))},f,l,c,h,p,d,v;return function(i,g,y){y=e.extend({duration:400,complete:m,stop:!1},y),i=e(i);if(!y.duration){i.css(g),y.complete.call(i[0]);return}if(!r){i.animate(g,y);return}y.stop&&(i.off(s),a(i)),f=!1,e.each(g,function(e,t){v=i.css(e),j.parseValue(v)!=j.parseValue(t)&&(f=!0),i.css(e,v)});if(!f){t.setTimeout(function(){y.complete.call(i[0])},y.duration);return}l=[],c=y.easing in o?o[y.easing]:o._default,h=" "+y.duration+"ms"+" cubic-bezier("+c.join(",")+")",t.setTimeout(function(t,r,i,s){return function(){t.one(r,function(e){return function(){a(e),y.complete.call(e[0])}}(t));if(n.WEBKIT&&n.TOUCH){p={},d=[0,0,0],e.each(["left","top"],function(e,n){n in i&&(d[e]=j.parseValue(i[n])-j.parseValue(t.css(n))+"px",p[n]=i[n],delete i[n])});if(d[0]||d[1])t.data("revert",p),l.push("-webkit-transform"+s),u(t,"translate3d("+d.join(",")+")","transform")}e.each(i,function(e,t){l.push(e+s)}),u(t,l.join(",")),t.css(i)}}(i,s,g,h),2)}}(),removeAlpha:function(e){e instanceof jQuery&&(e=e[0]);if(b<9&&e){var t=e.style,n=e.currentStyle,r=n&&n.filter||t.filter||"";/alpha/.test(r)&&(t.filter=r.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,n){t=e(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(n)},revertStyles:function(){e.each(j.array(arguments),function(t,n){n=e(n),n.removeAttr("style"),n.attr("style",""),n.data("styles")&&n.attr("style",n.data("styles")).data("styles",null)})},moveOut:function(e){j.forceStyles(e,{position:"absolute",left:-1e4})},moveIn:function(){j.revertStyles.apply(j,j.array(arguments))},hide:function(t,n,r){r=r||m;var i=e(t);t=i[0],i.data("opacity")||i.data("opacity",i.css("opacity"));var s={opacity:0};if(n){var o=b<9&&t?function(){j.removeAlpha(t),t.style.visibility="hidden",r.call(t)}:r;j.animate(t,s,{duration:n,complete:o,stop:!0})}else b<9&&t?(j.removeAlpha(t),t.style.visibility="hidden"):i.css(s)},show:function(t,n,r){r=r||m;var i=e(t);t=i[0];var s=parseFloat(i.data("opacity"))||1,o={opacity:s};if(n){b<9&&(i.css("opacity",0),t.style.visibility="visible");var u=b<9&&t?function(){o.opacity==1&&j.removeAlpha(t),r.call(t)}:r;j.animate(t,o,{duration:n,complete:u,stop:!0})}else b<9&&o.opacity==1&&t?(j.removeAlpha(t),t.style.visibility="visible"):i.css(o)},wait:function(r){n._waiters=n._waiters||[],r=e.extend({until:
g,success:m,error:function(){n.raise("Could not complete wait function.")},timeout:3e3},r);var i=j.timestamp(),s,o,u,a=function(){o=j.timestamp(),s=o-i,j.removeFromArray(n._waiters,u);if(r.until(s))return r.success(),!1;if(typeof r.timeout=="number"&&o>=i+r.timeout)return r.error(),!1;n._waiters.push(u=t.setTimeout(a,10))};n._waiters.push(u=t.setTimeout(a,10))},toggleQuality:function(e,t){if(b!==7&&b!==8||!e||e.nodeName.toUpperCase()!="IMG")return;typeof t=="undefined"&&(t=e.style.msInterpolationMode==="nearest-neighbor"),e.style.msInterpolationMode=t?"bicubic":"nearest-neighbor"},insertStyleTag:function(t,n){if(n&&e("#"+n).length)return;var r=i.createElement("style");n&&(r.id=n),w().head.appendChild(r);if(r.styleSheet)r.styleSheet.cssText=t;else{var s=i.createTextNode(t);r.appendChild(s)}},loadScript:function(t,n){var r=!1,i=e("<script>").attr({src:t,async:!0}).get(0);i.onload=i.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=!0,i.onload=i.onreadystatechange=null,typeof n=="function"&&n.call(this,this))},w().head.appendChild(i)},parseValue:function(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=e.match(/\-?\d|\./g);return t&&t.constructor===Array?t.join("")*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,s,o){var u,a;e("link[rel=stylesheet]").each(function(){if((new RegExp(t)).test(this.href))return u=this,!1}),typeof s=="function"&&(o=s,s=r),o=o||m;if(u)return o.call(u,u),u;a=i.styleSheets.length;if(e("#"+s).length)e("#"+s).attr("href",t),a--;else{u=e("<link>").attr({rel:"stylesheet",href:t,id:s}).get(0);var f=e('link[rel="stylesheet"], style');f.length?f.get(0).parentNode.insertBefore(u,f[0]):w().head.appendChild(u);if(b&&a>=31){n.raise("You have reached the browser stylesheet limit (31)",!0);return}}if(typeof o=="function"){var l=e("<s>").attr("id","galleria-loader").hide().appendTo(w().body);j.wait({until:function(){return l.height()>0},success:function(){l.remove(),o.call(u,u)},error:function(){l.remove(),n.raise("Theme CSS could not load after 20 sec. "+(n.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return u}}}(),F=function(t){var n=".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}";return j.insertStyleTag(n,"galleria-videoicon"),e(j.create("galleria-videoicon")).html("<i></i>").appendTo(t).click(function(){e(this).siblings("img").mouseup()})},I=function(){var t=function(t,n,r,i){var s=this.getOptions("easing"),o=this.getStageWidth(),u={left:o*(t.rewind?-1:1)},a={left:0};r?(u.opacity=0,a.opacity=1):u.opacity=1,e(t.next).css(u),j.animate(t.next,a,{duration:t.speed,complete:function(e){return function(){n(),e.css({left:0})}}(e(t.next).add(t.prev)),queue:!1,easing:s}),i&&(t.rewind=!t.rewind),t.prev&&(u={left:0},a={left:o*(t.rewind?1:-1)},r&&(u.opacity=1,a.opacity=0),e(t.prev).css(u),j.animate(t.prev,a,{duration:t.speed,queue:!1,easing:s,complete:function(){e(this).css("opacity",0)}}))};return{active:!1,init:function(e,t,n){I.effects.hasOwnProperty(e)&&I.effects[e].call(this,t,n)},effects:{fade:function(t,n){e(t.next).css({opacity:0,left:0}),j.animate(t.next,{opacity:1},{duration:t.speed,complete:n}),t.prev&&(e(t.prev).css("opacity",1).show(),j.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,n){e(t.next).css({opacity:0,left:0}),t.prev?j.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){j.animate(t.next,{opacity:1},{duration:t.speed,complete:n})}}):j.animate(t.next,{opacity:1},{duration:t.speed,complete:n})},pulse:function(t,n){t.prev&&e(t.prev).hide(),e(t.next).css({opacity:0,left:0}).show(),j.animate(t.next,{opacity:1},{duration:t.speed,complete:n})},slide:function(e,n){t.apply(this,j.array(arguments))},fadeslide:function(e,n){t.apply(this,j.array(arguments).concat([!0]))},doorslide:function(e,n){t.apply(this,j.array(arguments).concat([!1,!0]))}}}}();A.listen(),e.event.special["click:fast"]={propagate:!0,add:function(n){var r=function(e){if(e.touches&&e.touches.length){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}},i={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};e(this).data({clickstate:i,timer:0}).on("touchstart.fast",function(n){t.clearTimeout(e(this).data("timer")),e(this).data("clickstate",{touched:!0,touchdown:!0,coords:r(n.originalEvent),evObj:n})}).on("touchmove.fast",function(t){var n=r(t.originalEvent),i=e(this).data("clickstate"),s=Math.max(Math.abs(i.coords.x-n.x),Math.abs(i.coords.y-n.y));s>6&&e(this).data("clickstate",e.extend(i,{touchdown:!1}))}).on("touchend.fast",function(r){var s=e(this),o=s.data("clickstate");o.touchdown&&n.handler.call(this,r),s.data("timer",t.setTimeout(function(){s.data("clickstate",i)},400))}).on("click.fast",function(t){var r=e(this).data("clickstate");if(r.touched)return!1;e(this).data("clickstate",i),n.handler.call(this,t)})},remove:function(){e(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},o.on("orientationchange",function(){e(this).resize()}),n=function(){var u=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=r,this._binds=[],this._id=parseInt(v.random()*1e4,10);var a="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip"
,f="current total";e.each(a.split(" "),function(e,t){u._dom[t]=j.create("galleria-"+t)}),e.each(f.split(" "),function(e,t){u._dom[t]=j.create("galleria-"+t,"span")});var l=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(e){var t=e.keyCode||e.which;t in l.map&&typeof l.map[t]=="function"&&l.map[t].call(u,e)},attach:function(e){var t,n;for(t in e)e.hasOwnProperty(t)&&(n=t.toUpperCase(),n in l.keys?l.map[l.keys[n]]=e[t]:l.map[n]=e[t]);l.bound||(l.bound=!0,s.on("keydown",l.press))},detach:function(){l.bound=!1,l.map={},s.off("keydown",l.press)}},c=this._controls={0:r,1:r,active:0,swap:function(){c.active=c.active?0:1},getActive:function(){return u._options.swipe?c.slides[u._active]:c[c.active]},getNext:function(){return u._options.swipe?c.slides[u.getNext(u._active)]:c[1-c.active]},slides:[],frames:[],layers:[]},p=this._carousel={next:u.$("thumb-nav-right"),prev:u.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,n=0,r=[0];e.each(u._thumbnails,function(i,s){if(s.ready){t+=s.outerWidth||e(s.container).outerWidth(!0);var o=e(s.container).width();t+=o-v.floor(o),r[i+1]=t,n=v.max(n,s.outerHeight||e(s.container).outerHeight(!0))}}),u.$("thumbnails").css({width:t,height:n}),p.max=t,p.hooks=r,p.width=u.$("thumbnails-list").width(),p.setClasses(),u.$("thumbnails-container").toggleClass("galleria-carousel",t>p.width),p.width=u.$("thumbnails-list").width()},bindControls:function(){var e;p.next.on("click:fast",function(t){t.preventDefault();if(u._options.carouselSteps==="auto"){for(e=p.current;e<p.hooks.length;e++)if(p.hooks[e]-p.hooks[p.current]>p.width){p.set(e-2);break}}else p.set(p.current+u._options.carouselSteps)}),p.prev.on("click:fast",function(t){t.preventDefault();if(u._options.carouselSteps==="auto")for(e=p.current;e>=0;e--){if(p.hooks[p.current]-p.hooks[e]>p.width){p.set(e+2);break}if(e===0){p.set(0);break}}else p.set(p.current-u._options.carouselSteps)})},set:function(e){e=v.max(e,0);while(p.hooks[e-1]+p.width>=p.max&&e>=0)e--;p.current=e,p.animate()},getLast:function(e){return(e||p.current)-1},follow:function(e){if(e===0||e===p.hooks.length-2){p.set(e);return}var t=p.current;while(p.hooks[t]-p.hooks[p.current]<p.width&&t<=p.hooks.length)t++;e-1<p.current?p.set(e-1):e+2>t&&p.set(e-t+p.current+2)},setClasses:function(){p.prev.toggleClass("disabled",!p.current),p.next.toggleClass("disabled",p.hooks[p.current]+p.width>=p.max)},animate:function(t){p.setClasses();var n=p.hooks[p.current]*-1;if(isNaN(n))return;u.$("thumbnails").css("left",function(){return e(this).css("left")}),j.animate(u.get("thumbnails"),{left:n},{duration:u._options.carouselSpeed,easing:u._options.easing,queue:!1})}},d=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+u._id,swapTimer:"swap"+u._id,init:function(){d.initialized=!0;var e=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";j.insertStyleTag(e,"galleria-tooltip"),u.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(e){var t=u.getMousePosition(e).x,n=u.getMousePosition(e).y,r=u.$("tooltip"),i=t,s=n,o=r.outerHeight(!0)+1,a=r.outerWidth(!0),f=o+15,l=u.$("container").width()-a-2,c=u.$("container").height()-o-2;!isNaN(i)&&!isNaN(s)&&(i+=10,s-=o+8,i=v.max(0,v.min(l,i)),s=v.max(0,v.min(c,s)),n<f&&(s=f),r.css({left:i,top:s}))},bind:function(t,r){if(n.TOUCH)return;d.initialized||d.init();var i=function(){u.$("container").off("mousemove",d.move),u.clearTimer(d.timer),u.$("tooltip").stop().animate({opacity:0},200,function(){u.$("tooltip").hide(),u.addTimer(d.swapTimer,function(){d.open=!1},1e3)})},s=function(t,n){d.define(t,n),e(t).hover(function(){u.clearTimer(d.swapTimer),u.$("container").off("mousemove",d.move).on("mousemove",d.move).trigger("mousemove"),d.show(t),u.addTimer(d.timer,function(){u.$("tooltip").stop().show().animate({opacity:1}),d.open=!0},d.open?0:500)},i).click(i)};typeof r=="string"?s(t in u._dom?u.get(t):t,r):e.each(t,function(e,t){s(u.get(e),t)})},show:function(n){n=e(n in u._dom?u.get(n):n);var r=n.data("tt"),i=function(e){t.setTimeout(function(e){return function(){d.move(e)}}(e),10),n.off("mouseup",i)};r=typeof r=="function"?r():r;if(!r)return;u.$("tooltip").html(r.replace(/\s/,"&#160;")),n.on("mouseup",i)},define:function(t,n){if(typeof n!="function"){var r=n;n=function(){return r}}t=e(t in u._dom?u.get(t):t).data("tt",n),d.show(t)}},m=this._fullscreen={scrolled:0,crop:r,active:!1,prev:e(),beforeEnter:function(e){e()},beforeExit:function(e){e()},keymap:u._keyboard.map,parseCallback:function(t,n){return I.active?function(){typeof t=="function"&&t.call(u);var r=u._controls.getActive(),i=u._controls.getNext();u._scaleImage(i),u._scaleImage(r),n&&u._options.trueFullscreen&&e(r.container).add(i.container).trigger("transitionend")}:t},enter:function(e){m.beforeEnter(function(){e=m.parseCallback(e,!0),u._options.trueFullscreen&&A.support?(m.active=!0,j.forceStyles(u.get("container"),{width:"100%",height:"100%"}),u.rescale(),n.MAC?!n.SAFARI||!/version\/[1-5]/.test(h)?(u.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){m.scale(),u.$("container").css("opacity",1)},50)):(u.$("stage").css("opacity",0),t.setTimeout(function(){m.scale(),u.$("stage").css("opacity",1)},4)):u.$("container").addClass("fullscreen"),o.resize(m.scale),A.enter(u,e,u.get("container"))):(m.scrolled=o.scrollTop(),n.TOUCH||t.scrollTo(0,0),m._enter(e))})},_enter:function(s){m.active=!0,E&&(m.iframe=function(){var r,s=i.referrer,o=i.createElement("a"),u=t.location;return o.href=s,o.protocol!=u.protocol||o.hostname!=u.hostname||o.port!=u.port?(n.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(m.pd=t.parent.document,e(m.pd).find("iframe").each(function(){var e=this.contentDocument||
this.contentWindow.document;if(e===i)return r=this,!1}),r)}()),j.hide(u.getActiveImage()),E&&m.iframe&&(m.iframe.scrolled=e(t.parent).scrollTop(),t.parent.scrollTo(0,0));var a=u.getData(),f=u._options,l=!u._options.trueFullscreen||!A.support,c={height:"100%",overflow:"hidden",margin:0,padding:0};l&&(u.$("container").addClass("fullscreen"),m.prev=u.$("container").prev(),m.prev.length||(m.parent=u.$("container").parent()),u.$("container").appendTo("body"),j.forceStyles(u.get("container"),{position:n.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),j.forceStyles(w().html,c),j.forceStyles(w().body,c)),E&&m.iframe&&(j.forceStyles(m.pd.documentElement,c),j.forceStyles(m.pd.body,c),j.forceStyles(m.iframe,e.extend(c,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),m.keymap=e.extend({},u._keyboard.map),u.attachKeyboard({escape:u.exitFullscreen,right:u.next,left:u.prev}),m.crop=f.imageCrop,f.fullscreenCrop!=r&&(f.imageCrop=f.fullscreenCrop);if(a&&a.big&&a.image!==a.big){var h=new n.Picture,p=h.isCached(a.big),d=u.getIndex(),v=u._thumbnails[d];u.trigger({type:n.LOADSTART,cached:p,rewind:!1,index:d,imageTarget:u.getActiveImage(),thumbTarget:v,galleriaData:a}),h.load(a.big,function(t){u._scaleImage(t,{complete:function(t){u.trigger({type:n.LOADFINISH,cached:p,index:d,rewind:!1,imageTarget:t.image,thumbTarget:v});var r=u._controls.getActive().image;r&&e(r).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")).attr("src",t.image.src)}})});var g=u.getNext(d),y=new n.Picture,b=u.getData(g);y.preload(u.isFullscreen()&&b.big?b.big:b.image)}u.rescale(function(){u.addTimer(!1,function(){l&&j.show(u.getActiveImage()),typeof s=="function"&&s.call(u),u.rescale()},100),u.trigger(n.FULLSCREEN_ENTER)}),l?o.resize(m.scale):j.show(u.getActiveImage())},scale:function(){u.rescale()},exit:function(e){m.beforeExit(function(){e=m.parseCallback(e),u._options.trueFullscreen&&A.support?A.exit(e):m._exit(e)})},_exit:function(e){m.active=!1;var r=!u._options.trueFullscreen||!A.support,i=u.$("container").removeClass("fullscreen");m.parent?m.parent.prepend(i):i.insertAfter(m.prev);if(r){j.hide(u.getActiveImage()),j.revertStyles(u.get("container"),w().html,w().body),n.TOUCH||t.scrollTo(0,m.scrolled);var s=u._controls.frames[u._controls.active];s&&s.image&&(s.image.src=s.image.src)}E&&m.iframe&&(j.revertStyles(m.pd.documentElement,m.pd.body,m.iframe),m.iframe.scrolled&&t.parent.scrollTo(0,m.iframe.scrolled)),u.detachKeyboard(),u.attachKeyboard(m.keymap),u._options.imageCrop=m.crop;var a=u.getData().big,f=u._controls.getActive().image;!u.getData().iframe&&f&&a&&a==f.src&&t.setTimeout(function(e){return function(){f.src=e}}(u.getData().image),1),u.rescale(function(){u.addTimer(!1,function(){r&&j.show(u.getActiveImage()),typeof e=="function"&&e.call(u),o.trigger("resize")},50),u.trigger(n.FULLSCREEN_EXIT)}),o.off("resize",m.scale)}},g=this._idle={trunk:[],bound:!1,active:!1,add:function(t,r,i,s){if(!t||n.TOUCH)return;g.bound||g.addEvent(),t=e(t),typeof i=="boolean"&&(s=i,i={}),i=i||{};var o={},u;for(u in r)r.hasOwnProperty(u)&&(o[u]=t.css(u));t.data("idle",{from:e.extend(o,i),to:r,complete:!0,busy:!1}),s?t.css(r):g.addTimer(),g.trunk.push(t)},remove:function(t){t=e(t),e.each(g.trunk,function(e,n){n&&n.length&&!n.not(t).length&&(t.css(t.data("idle").from),g.trunk.splice(e,1))}),g.trunk.length||(g.removeEvent(),u.clearTimer(g.timer))},addEvent:function(){g.bound=!0,u.$("container").on("mousemove click",g.showAll),u._options.idleMode=="hover"&&u.$("container").on("mouseleave",g.hide)},removeEvent:function(){g.bound=!1,u.$("container").on("mousemove click",g.showAll),u._options.idleMode=="hover"&&u.$("container").off("mouseleave",g.hide)},addTimer:function(){if(u._options.idleMode=="hover")return;u.addTimer("idle",function(){g.hide()},u._options.idleTime)},hide:function(){if(!u._options.idleMode||u.getIndex()===!1)return;u.trigger(n.IDLE_ENTER);var t=g.trunk.length;e.each(g.trunk,function(e,n){var r=n.data("idle");if(!r)return;n.data("idle").complete=!1,j.animate(n,r.to,{duration:u._options.idleSpeed,complete:function(){e==t-1&&(g.active=!1)}})})},showAll:function(){u.clearTimer("idle"),e.each(g.trunk,function(e,t){g.show(t)})},show:function(t){var r=t.data("idle");if(!g.active||!r.busy&&!r.complete)r.busy=!0,u.trigger(n.IDLE_EXIT),u.clearTimer("idle"),j.animate(t,r.from,{duration:u._options.idleSpeed/2,complete:function(){g.active=!0,e(t).data("idle").busy=!1,e(t).data("idle").complete=!0}});g.addTimer()}},y=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(y.initialized)return;y.initialized=!0;var t="overlay box content shadow title info close prevholder prev nextholder next counter image",r={},i=u._options,s="",o="position:absolute;",a="lightbox-",f={overlay:"position:fixed;display:none;opacity:"+i.overlayOpacity+";filter:alpha(opacity="+i.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+i.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:o+"background:#000;width:100%;height:100%;",content:o+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:o+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:o+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:o+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:o+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:o+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:o+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000"
,title:"float:left",counter:"float:right;margin-left:8px;"},l=function(t){return t.hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")})},c={},h="";b>7?h=b<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":h="z-index:99999",f.nextholder+=h,f.prevholder+=h,e.each(f,function(e,t){s+=".galleria-"+a+e+"{"+t+"}"}),s+=".galleria-"+a+"box.iframe .galleria-"+a+"prevholder,"+".galleria-"+a+"box.iframe .galleria-"+a+"nextholder{"+"width:100px;height:100px;top:50%;margin-top:-70px}",j.insertStyleTag(s,"galleria-lightbox"),e.each(t.split(" "),function(e,t){u.addElement("lightbox-"+t),r[t]=y.elems[t]=u.get("lightbox-"+t)}),y.image=new n.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,n){var r=[];e.each(n.split(" "),function(e,t){r.push(a+t)}),c[a+t]=r}),u.append(c),e(r.image).append(y.image.container),e(w().body).append(r.overlay,r.box),l(e(r.close).on("click:fast",y.hide).html("&#215;")),e.each(["Prev","Next"],function(t,i){var s=e(r[i.toLowerCase()]).html(/v/.test(i)?"&#8249;&#160;":"&#160;&#8250;"),o=e(r[i.toLowerCase()+"holder"]);o.on("click:fast",function(){y["show"+i]()});if(b<8||n.TOUCH){s.show();return}o.hover(function(){s.show()},function(e){s.stop().fadeOut(200)})}),e(r.overlay).on("click:fast",y.hide),n.IPAD&&(u._options.lightboxTransitionSpeed=0)},rescale:function(t){var r=v.min(o.width()-40,y.width),i=v.min(o.height()-60,y.height),s=v.min(r/y.width,i/y.height),a=v.round(y.width*s)+40,f=v.round(y.height*s)+60,l={width:a,height:f,"margin-top":v.ceil(f/2)*-1,"margin-left":v.ceil(a/2)*-1};t?e(y.elems.box).css(l):e(y.elems.box).animate(l,{duration:u._options.lightboxTransitionSpeed,easing:u._options.easing,complete:function(){var t=y.image,r=u._options.lightboxFadeSpeed;u.trigger({type:n.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),e(t.image).animate({opacity:1},r),j.show(y.elems.info,r)}})},hide:function(){y.image.image=null,o.off("resize",y.rescale),e(y.elems.box).hide().find("iframe").remove(),j.hide(y.elems.info),u.detachKeyboard(),u.attachKeyboard(y.keymap),y.keymap=!1,j.hide(y.elems.overlay,200,function(){e(this).hide().css("opacity",u._options.overlayOpacity),u.trigger(n.LIGHTBOX_CLOSE)})},showNext:function(){y.show(u.getNext(y.active))},showPrev:function(){y.show(u.getPrev(y.active))},show:function(r){y.active=r=typeof r=="number"?r:u.getIndex()||0,y.initialized||y.init(),u.trigger(n.LIGHTBOX_OPEN),y.keymap||(y.keymap=e.extend({},u._keyboard.map),u.attachKeyboard({escape:y.hide,right:y.showNext,left:y.showPrev})),o.off("resize",y.rescale);var i=u.getData(r),s=u.getDataLength(),a=u.getNext(r),f,l,c;j.hide(y.elems.info);try{for(c=u._options.preload;c>0;c--)l=new n.Picture,f=u.getData(a),l.preload(f.big?f.big:f.image),a=u.getNext(a)}catch(h){}y.image.isIframe=i.iframe&&!i.image,e(y.elems.box).toggleClass("iframe",y.image.isIframe),e(y.image.container).find(".galleria-videoicon").remove(),y.image.load(i.big||i.image||i.iframe,function(n){if(n.isIframe){var a=e(t).width(),f=e(t).height();if(n.video&&u._options.maxVideoSize){var l=v.min(u._options.maxVideoSize/a,u._options.maxVideoSize/f);l<1&&(a*=l,f*=l)}y.width=a,y.height=f}else y.width=n.original.width,y.height=n.original.height;e(n.image).css({width:n.isIframe?"100%":"100.1%",height:n.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),y.elems.title.innerHTML=i.title||"",y.elems.counter.innerHTML=r+1+" / "+s,o.resize(y.rescale),y.rescale();if(i.image&&i.iframe){e(y.elems.box).addClass("iframe");if(i.video){var c=F(n.container).hide();t.setTimeout(function(){c.fadeIn(200)},200)}e(n.image).css("cursor","pointer").mouseup(function(t,n){return function(r){e(y.image.container).find(".galleria-videoicon").remove(),r.preventDefault(),n.isIframe=!0,n.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:b<8?e(y.image.container).height():"100%"})}}(i,n))}}),e(y.elems.overlay).show().css("visibility","visible"),e(y.elems.box).show()}},S=this._timer={trunk:{},add:function(e,n,r,i){e=e||(new Date).getTime(),i=i||!1,this.clear(e);if(i){var s=n;n=function(){s(),S.add(e,n,r)}}this.trunk[e]=t.setTimeout(n,r)},clear:function(e){var n=function(e){t.clearTimeout(this.trunk[e]),delete this.trunk[e]},r;if(!!e&&e in this.trunk)n.call(this,e);else if(typeof e=="undefined")for(r in this.trunk)this.trunk.hasOwnProperty(r)&&n.call(this,r)}};return this},n.prototype={constructor:n,init:function(t,i){i=T(i),this._original={target:t,options:i,data:null},this._target=this._dom.target=t.nodeName?t:e(t).get(0),this._original.html=this._target.innerHTML,M.push(this);if(!this._target){n.raise("Target not found",!0);return}this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(e){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:r,dummy:r,easing:"galleria",extend:function(e){},fullscreenCrop:r,fullscreenDoubleTap:!0,fullscreenTransition:r,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:r,initialTransition:r,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:r,maxVideoSize:r,minScaleRatio:r,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:r,transition:"fade",transitionInitial:r,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"
},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,i&&(i.debug===!1&&(f=!1),typeof i.imageTimeout=="number"&&(l=i.imageTimeout),typeof i.dummy=="string"&&(c=i.dummy),typeof i.theme=="string"&&(this._options.theme=i.theme)),e(this._target).children().hide(),n.QUIRK&&n.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype.");if(H.length)if(this._options.theme){for(var s=0;s<H.length;s++)if(this._options.theme===H[s].name){this.theme=H[s];break}}else this.theme=H[0];return typeof this.theme=="object"?this._init():P.push(this),this},_init:function(){var s=this,u=this._options;if(this._initialized)return n.raise("Init failed: Gallery instance already initialized."),this;this._initialized=!0;if(!this.theme)return n.raise("Init failed: No theme found.",!0),this;e.extend(!0,u,this.theme.defaults,this._original.options,n.configure.options),u.swipe=function(e){return e=="enforced"?!0:e===!1||e=="disabled"?!1:!!n.TOUCH}(u.swipe),u.swipe&&(u.clicknext=!1,u.imagePan=!1),function(e){if(!("getContext"in e)){e=null;return}D=D||{elem:e,context:e.getContext("2d"),cache:{},length:0}}(i.createElement("canvas")),this.bind(n.DATA,function(){t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(e){var n="devicePixelRatio"in t?t.devicePixelRatio:1,r=v.max(t.screen.width,t.screen.height);r*n<1024&&(e.big=e.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var e=this.$("container");s._options.height<2&&(s._userRatio=s._ratio=s._options.height);var r={width:0,height:0},i=function(){return s.$("stage").height()};j.wait({until:function(){return r=s._getWH(),e.width(r.width).height(r.height),i()&&r.width&&r.height>50},success:function(){s._width=r.width,s._height=r.height,s._ratio=s._ratio||r.height/r.width,n.WEBKIT?t.setTimeout(function(){s._run()},1):s._run()},error:function(){i()?n.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+r.width+"px, height: "+r.height+"px.",!0):n.raise("Could not extract a stage height from the CSS. Traced height: "+i()+"px.",!0)},timeout:typeof this._options.wait=="number"?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),j.hide(this.$("counter").append(this.get("current"),i.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),j.hide(s.get("tooltip")),this.$("container").addClass([n.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||e.each(new Array(2),function(t){var r=new n.Picture;e(r.container).css({position:"absolute",top:0,left:0}).prepend(s._layers[t]=e(j.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),s.$("images").append(r.container),s._controls[t]=r;var i=new n.Picture;i.isIframe=!0,e(i.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container),s._controls.frames[t]=i}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),u.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new n.Finger(this.get("stage"),{onchange:function(e){s.pause().show(e)},oncomplete:function(t){var n=v.max(0,v.min(parseInt(t,10),s.getDataLength()-1)),r=s.getData(n);e(s._thumbnails[n].container).addClass("active").siblings(".active").removeClass("active");if(!r)return;s.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),s._options.carousel&&s._options.carouselFollow&&s._carousel.follow(n)}}),this.bind(n.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(n){var i=s.getData();if(!i)return;if(i.iframe){s.isPlaying()&&s.pause();var o=s._controls.frames[s._active],u=s._stageWidth,a=s._stageHeight;if(e(o.container).find("iframe").length)return;e(o.container).css({width:u,height:a,opacity:0}).show().animate({opacity:1},200),t.setTimeout(function(){o.load(i.iframe+(i.video?"&autoplay=1":""),{width:u,height:a},function(e){s.$("container").addClass("videoplay"),e.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:i.video?s._options.maxVideoSize:r})})},100);return}if(i.link){if(s._options.popupLinks)var f=t.open(i.link,"_blank");else t.location.href=i.link;return}}),this.bind(n.IMAGE,function(t){s.setCounter(t.index),s.setInfo(t.index);var n=this.getNext(),r=this.getPrev(),i=[r,n];i.push(this.getNext(n),this.getPrev(r),s._controls.slides.length-1);var o=[];e.each(i,function(t,n){e.inArray(n,o)==-1&&o.push(n)}),e.each(o,function(t,n){var r=s.getData(n),i=s._controls.slides[n],o=s.isFullscreen()&&r.big?r.big:r.image||r.iframe;r.iframe&&!r.image&&(i.isIframe=!0),i.ready||s._controls.slides[n].load(o,function(t){t.isIframe||e(t.image).css("visibility","hidden"),s._scaleImage(t,{complete:function(t){t.isIframe||e(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(e){u.pauseOnInteraction&&s.pause();var t=/right/.test(this.className)?"next":"prev";s[t]()}).on("click",function(e){e.preventDefault(),(u.clicknext||u.swipe)&&e.stopPropagation()}),e.each(["info","counter","image-nav"],function(e,t){u["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&j.moveOut(s.get(t.toLowerCase()))}),this.load(),!u.keepSource&&!b&&(this._target.innerHTML=""
),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container");if(u.carousel){var a=0,f=u.show;this.bind(n.THUMBNAIL,function(){this.updateCarousel(),++a==this.getDataLength()&&typeof f=="number"&&f>0&&this._carousel.follow(f)})}return u.responsive&&o.on("resize",function(){s.isFullscreen()||s.resize()}),u.fullscreenDoubleTap&&this.$("stage").on("touchstart",function(){var e,t,n,r,i,o,u=function(e){return e.originalEvent.touches?e.originalEvent.touches[0]:e};return s.$("stage").on("touchmove",function(){e=0}),function(a){if(/(-left|-right)/.test(a.target.className))return;o=j.timestamp(),t=u(a).pageX,n=u(a).pageY;if(a.originalEvent.touches.length<2&&o-e<300&&t-r<20&&n-i<20){s.toggleFullscreen(),a.preventDefault();return}e=o,r=t,i=n}}()),e.each(n.on.binds,function(t,n){e.inArray(n.hash,s._binds)==-1&&s.bind(n.type,n.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,j.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,j.array(arguments)),this},_getWH:function(){var t=this.$("container"),n=this.$("target"),r=this,i={},s;return e.each(["width","height"],function(e,o){r._options[o]&&typeof r._options[o]=="number"?i[o]=r._options[o]:(s=[j.parseValue(t.css(o)),j.parseValue(n.css(o)),t[o](),n[o]()],r["_"+o]||s.splice(s.length,j.parseValue(t.css("min-"+o)),j.parseValue(n.css("min-"+o))),i[o]=v.max.apply(v,s))}),r._userRatio&&(i.height=i.width*r._userRatio),i},_createThumbnails:function(r){this.get("total").innerHTML=this.getDataLength();var s,o,u,a,f=this,l=this._options,c=r?this._data.length-r.length:0,h=c,p=[],d=0,v=b<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",m=function(){var e=f.$("thumbnails").find(".active");return e.length?e.find("img").attr("src"):!1}(),g=typeof l.thumbnails=="string"?l.thumbnails.toLowerCase():null,y=function(e){return i.defaultView&&i.defaultView.getComputedStyle?i.defaultView.getComputedStyle(o.container,null)[e]:a.css(e)},w=function(t,r,i){return function(){e(i).append(t),f.trigger({type:n.THUMBNAIL,thumbTarget:t,index:r,galleriaData:f.getData(r)})}},E=function(t){l.pauseOnInteraction&&f.pause();var n=e(t.currentTarget).data("index");f.getIndex()!==n&&f.show(n),t.preventDefault()},S=function(t,r){e(t.container).css("visibility","visible"),f.trigger({type:n.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:f.getData(t.data.order)}),typeof r=="function"&&r.call(f,t)},x=function(t,n){t.scale({width:t.data.width,height:t.data.height,crop:l.thumbCrop,margin:l.thumbMargin,canvas:l.useCanvas,position:l.thumbPosition,complete:function(t){var r=["left","top"],i=["Width","Height"],s,o,u=f.getData(t.index);e.each(i,function(n,i){s=i.toLowerCase();if(l.thumbCrop!==!0||l.thumbCrop===s)o={},o[s]=t[s],e(t.container).css(o),o={},o[r[n]]=0,e(t.image).css(o);t["outer"+i]=e(t.container)["outer"+i](!0)}),j.toggleQuality(t.image,l.thumbQuality===!0||l.thumbQuality==="auto"&&t.original.width<t.width*3),l.thumbDisplayOrder&&!t.lazy?e.each(p,function(e,t){if(e===d&&t.ready&&!t.displayed){d++,t.displayed=!0,S(t,n);return}}):S(t,n)}})};r||(this._thumbnails=[],this.$("thumbnails").empty());for(;this._data[c];c++)u=this._data[c],s=u.thumb||u.image,l.thumbnails!==!0&&g!="lazy"||!u.thumb&&!u.image?u.iframe&&g!==null||g==="empty"||g==="numbers"?(o={container:j.create("galleria-image"),image:j.create("img","span"),ready:!0,data:{order:c}},g==="numbers"&&e(o.image).text(c+1),u.iframe&&e(o.image).addClass("iframe"),this.$("thumbnails").append(o.container),t.setTimeout(w(o.image,c,o.container),50+c*20)):o={container:null,image:null}:(o=new n.Picture(c),o.index=c,o.displayed=!1,o.lazy=!1,o.video=!1,this.$("thumbnails").append(o.container),a=e(o.container),a.css("visibility","hidden"),o.data={width:j.parseValue(y("width")),height:j.parseValue(y("height")),order:c,src:s},l.thumbCrop!==!0?a.css({width:"auto",height:"auto"}):a.css({width:o.data.width,height:o.data.height}),g=="lazy"?(a.addClass("lazy"),o.lazy=!0,o.load(v,{height:o.data.height,width:o.data.width})):o.load(s,x),l.preload==="all"&&o.preload(u.image)),e(o.container).add(l.keepSource&&l.linkSourceImages?u.original:null).data("index",c).on(l.thumbEventType,E).data("thumbload",x),m===s&&e(o.container).addClass("active"),this._thumbnails.push(o);return p=this._thumbnails.slice(h),this},lazyLoad:function(t,n){var r=t.constructor==Array?t:[t],i=this,s=0;return e.each(r,function(t,o){if(o>i._thumbnails.length-1)return;var u=i._thumbnails[o],a=u.data,f=function(){++s==r.length&&typeof n=="function"&&n.call(i)},l=e(u.container).data("thumbload");l&&(u.video?l.call(i,u,f):u.load(a.src,function(e){l.call(i,e,f)}))}),this},lazyLoadChunks:function(e,n){var r=this.getDataLength(),i=0,s=0,o=[],u=[],a=this;n=n||0;for(;i<r;i++){u.push(i);if(++s==e||i==r-1)o.push(u),s=0,u=[]}var f=function(e){var r=o.shift();r&&t.setTimeout(function(){a.lazyLoad(r,function(){f(!0)})},n&&e?n:0)};return f(!1),this},_run:function(){var i=this;i._createThumbnails(),j.wait({timeout:1e4,until:function(){return n.OPERA&&i.$("stage").css("display","inline-block"),i._stageWidth=i.$("stage").width(),i._stageHeight=i.$("stage").height(),i._stageWidth&&i._stageHeight>50},success:function(){O.push(i);if(i._options.swipe){var s=i.$("images").width(i.getDataLength()*i._stageWidth);e.each(new Array(i.getDataLength()),function(t){var r=new n.Picture,o=i.getData(t);e(r.container).css({position:"absolute",top:0,left:i._stageWidth*t}).prepend(i._layers[t]=e(j.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(s),o.video&&F(r.container),i._controls.slides.push(r);var u=new n.Picture;u.isIframe=!0,e(u.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container),i._controls.frames.push(u)}),i.finger.setup()}j.show(i.get("counter")),i._options.carousel&&
i._carousel.bindControls(),i._options.autoplay&&(i.pause(),typeof i._options.autoplay=="number"&&(i._playtime=i._options.autoplay),i._playing=!0);if(i._firstrun){i._options.autoplay&&i.trigger(n.PLAY),typeof i._options.show=="number"&&i.show(i._options.show);return}i._firstrun=!0,n.History&&n.History.change(function(e){isNaN(e)?t.history.go(-1):i.show(e,r,!0)}),i.trigger(n.READY),i.theme.init.call(i,i._options),e.each(n.ready.callbacks,function(e,t){typeof t=="function"&&t.call(i,i._options)}),i._options.extend.call(i,i._options),/^[0-9]{1,4}$/.test(p)&&n.History?i.show(p,r,!0):i._data[i._options.show]&&i.show(i._options.show),i._options.autoplay&&i.trigger(n.PLAY)},error:function(){n.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+i._stageWidth+"px, height: "+i._stageHeight+"px.",!0)}})},load:function(t,r,i){var s=this,o=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof r=="function"&&(i=r,r=null),t=t||o.dataSource,r=r||o.dataSelector,i=i||o.dataConfig,e.isPlainObject(t)&&(t=[t]),e.isArray(t)?this.validate(t)?this._data=t:n.raise("Load failed: JSON Array not valid."):(r+=",.video,.iframe",e(t).find(r).each(function(t,n){n=e(n);var r={},o=n.parent(),u=o.attr("href"),a=o.attr("rel");u&&(n[0].nodeName=="IMG"||n.hasClass("video"))&&L(u)?r.video=u:u&&n.hasClass("iframe")?r.iframe=u:r.image=r.big=u,a&&(r.big=a),e.each("big title description link layer image".split(" "),function(e,t){n.data(t)&&(r[t]=n.data(t).toString())}),r.big||(r.big=r.image),s._data.push(e.extend({title:n.attr("title")||"",thumb:n.attr("src"),image:n.attr("src"),big:n.attr("src"),description:n.attr("alt")||"",link:n.attr("longdesc"),original:n.get(0)},r,i(n)))})),typeof o.dataSort=="function"?u.sort.call(this._data,o.dataSort):o.dataSort=="random"&&this._data.sort(function(){return v.round(v.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(n.DATA)}),this},_parseData:function(t){var n=this,i,s=!1,o=function(){var r=!0;e.each(n._data,function(e,t){if(t.loading)return r=!1,!1}),r&&!s&&(s=!0,t.call(n))};return e.each(this._data,function(t,s){i=n._data[t],"thumb"in s==0&&(i.thumb=s.image),s.big||(i.big=s.image);if("video"in s){var u=L(s.video);u&&(i.iframe=(new k(u.provider,u.id)).embed()+function(){if(typeof n._options[u.provider]=="object"){var t="?",r=[];return e.each(n._options[u.provider],function(e,t){r.push(e+"="+t)}),u.provider=="youtube"&&(r=["wmode=opaque"].concat(r)),t+r.join("&")}return""}(),(!i.thumb||!i.image)&&e.each(["thumb","image"],function(e,t){if(t=="image"&&!n._options.videoPoster){i.image=r;return}var s=new k(u.provider,u.id);i[t]||(i.loading=!0,s.getMedia(t,function(e,t){return function(n){e[t]=n,t=="image"&&!e.big&&(e.big=e.image),delete e.loading,o()}}(i,t)))}))}}),o(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),j.removeFromArray(M,this),j.removeFromArray(O,this),n._waiters!==undefined&&n._waiters.length&&e.each(n._waiters,function(e,n){n&&t.clearTimeout(n)}),this},splice:function(){var e=this,n=j.array(arguments);return t.setTimeout(function(){u.splice.apply(e._data,n),e._parseData(function(){e._createThumbnails()})},2),e},push:function(){var e=this,n=j.array(arguments);return n.length==1&&n[0].constructor==Array&&(n=n[0]),t.setTimeout(function(){u.push.apply(e._data,n),e._parseData(function(){e._createThumbnails(n)})},2),e},_getActive:function(){return this._controls.getActive()},validate:function(e){return!0},bind:function(e,t){return e=N(e),this.$("container").on(e,this.proxy(t)),this},unbind:function(e){return e=N(e),this.$("container").off(e),this},trigger:function(t){return t=typeof t=="object"?e.extend(t,{scope:this}):{type:N(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(e,t,n,r){return this._idle.add.apply(this._idle,j.array(arguments)),this},removeIdleState:function(e){return this._idle.remove.apply(this._idle,j.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(e){return this._fullscreen.enter.apply(this,j.array(arguments)),this},exitFullscreen:function(e){return this._fullscreen.exit.apply(this,j.array(arguments)),this},toggleFullscreen:function(e){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,j.array(arguments)),this},bindTooltip:function(e,t){return this._tooltip.bind.apply(this._tooltip,j.array(arguments)),this},defineTooltip:function(e,t){return this._tooltip.define.apply(this._tooltip,j.array(arguments)),this},refreshTooltip:function(e){return this._tooltip.show.apply(this._tooltip,j.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,j.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,j.array(arguments)),this},hasVariation:function(t){return e.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var e=this._getActive();return e?e.image:r},getActiveThumb:function(){return this._thumbnails[this._active].image||r},getMousePosition:function(e){return{x:e.pageX-this.$("container").offset().left,y:e.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop===!1)return;t=e(t||this.getActiveImage());var n=this,r=t.width()/2,i=t.height()/2,s=parseInt(t.css("left"),10),o=parseInt(t.css("top"),10),u=s||0,a=o||0,f=0,l=0,c=!1,h=j.timestamp(),p=0,d=0,m=function(e,n,r){if(e>0){d=v.round(v.max(e*-1,v.min(0,n)));if(p!==d){p=d;if(b===8)t.parent()["scroll"+r](d*-1);else{var i={};i[r.toLowerCase()]=d,t.css(i)}}}},g=function(e){if(j.timestamp()-h<50)return;c=!0,r=n.getMousePosition(e).x,i=n.getMousePosition(e).y},y=function(e){if(!c)return;f=t.width()-n._stageWidth,l=t.height()-n._stageHeight,s=r/n._stageWidth*f*-1,o=i/n._stageHeight*l*-1,u+=(s-u)/n._options.imagePanSmoothness
,a+=(o-a)/n._options.imagePanSmoothness,m(l,a,"Top"),m(f,u,"Left")};return b===8&&(t.parent().scrollTop(a*-1).scrollLeft(u*-1),t.css({top:0,left:0})),this.$("stage").off("mousemove",g).on("mousemove",g),this.addTimer("pan"+n._id,y,50,!0),this},proxy:function(e,t){return typeof e!="function"?m:(t=t||this,function(){return e.apply(t,j.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(t){var n=this._dom;return e.each(j.array(arguments),function(e,t){n[t]=j.create("galleria-"+t)}),this},attachKeyboard:function(e){return this._keyboard.attach.apply(this._keyboard,j.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,j.array(arguments)),this},appendChild:function(e,t){return this.$(e).append(this.get(t)||t),this},prependChild:function(e,t){return this.$(e).prepend(this.get(t)||t),this},remove:function(e){return this.$(j.array(arguments).join(",")).remove(),this},append:function(e){var t,n;for(t in e)if(e.hasOwnProperty(t))if(e[t].constructor===Array)for(n=0;e[t][n];n++)this.appendChild(t,e[t][n]);else this.appendChild(t,e[t]);return this},_scaleImage:function(t,n){t=t||this._controls.getActive();if(!t)return;var r,i=function(t){e(t.container).children(":first").css({top:v.max(0,j.parseValue(t.image.style.top)),left:v.max(0,j.parseValue(t.image.style.left)),width:j.parseValue(t.image.width),height:j.parseValue(t.image.height)})};return n=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},n),this._options.layerFollow&&this._options.imageCrop!==!0?typeof n.complete=="function"?(r=n.complete,n.complete=function(){r.call(t,t),i(t)}):n.complete=i:e(t.container).children(":first").css({top:0,left:0}),t.scale(n),this},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,n){typeof t=="function"&&(n=t,t=r),t=e.extend({width:0,height:0},t);var i=this,s=this.$("container");return e.each(t,function(e,n){n||(s[e]("auto"),t[e]=i._getWH()[e])}),e.each(t,function(e,t){s[e](t)}),this.rescale(n)},rescale:function(t,i,s){var o=this;typeof t=="function"&&(s=t,t=r);var u=function(){o._stageWidth=t||o.$("stage").width(),o._stageHeight=i||o.$("stage").height(),o._options.swipe?(e.each(o._controls.slides,function(t,n){o._scaleImage(n),e(n.container).css("left",o._stageWidth*t)}),o.$("images").css("width",o._stageWidth*o.getDataLength())):o._scaleImage(),o._options.carousel&&o.updateCarousel();var r=o._controls.frames[o._controls.active];r&&o._controls.frames[o._controls.active].scale({width:o._stageWidth,height:o._stageHeight,iframelimit:o._options.maxVideoSize}),o.trigger(n.RESCALE),typeof s=="function"&&s.call(o)};return u.call(o),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var e,t,r=this.getNext(),i;try{for(t=this._options.preload;t>0;t--)e=new n.Picture,i=this.getData(r),e.preload(this.isFullscreen()&&i.big?i.big:i.image),r=this.getNext(r)}catch(s){}}},show:function(r,i,s){var o=this._options.swipe;if(!o&&(this._queue.length>3||r===!1||!this._options.queue&&this._queue.stalled))return;r=v.max(0,v.min(parseInt(r,10),this.getDataLength()-1)),i=typeof i!="undefined"?!!i:r<this.getIndex(),s=s||!1;if(!s&&n.History){n.History.set(r.toString());return}this.finger&&r!==this._active&&(this.finger.to=-(r*this.finger.width),this.finger.index=r),this._active=r;if(o){var a=this.getData(r),f=this;if(!a)return;var l=this.isFullscreen()&&a.big?a.big:a.image||a.iframe,c=this._controls.slides[r],h=c.isCached(l),p=this._thumbnails[r],d={cached:h,index:r,rewind:i,imageTarget:c.image,thumbTarget:p.image,galleriaData:a};this.trigger(e.extend(d,{type:n.LOADSTART})),f.$("container").removeClass("videoplay");var m=function(){f._layers[r].innerHTML=f.getData().layer||"",f.trigger(e.extend(d,{type:n.LOADFINISH})),f._playCheck()};f._preload(),t.setTimeout(function(){!c.ready||e(c.image).attr("src")!=l?(a.iframe&&!a.image&&(c.isIframe=!0),c.load(l,function(t){d.imageTarget=t.image,f._scaleImage(t,m).trigger(e.extend(d,{type:n.IMAGE})),m()})):(f.trigger(e.extend(d,{type:n.IMAGE})),m())},100)}else u.push.call(this._queue,{index:r,rewind:i}),this._queue.stalled||this._show();return this},_show:function(){var i=this,s=this._queue[0],o=this.getData(s.index);if(!o)return;var a=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,f=this._controls.getActive(),l=this._controls.getNext(),c=l.isCached(a),h=this._thumbnails[s.index],p=function(){e(l.image).trigger("mouseup")};i.$("container").toggleClass("iframe",!!o.isIframe).removeClass("videoplay");var d=function(s,o,a,f,l){return function(){var c;I.active=!1,j.toggleQuality(o.image,i._options.imageQuality),i._layers[i._controls.active].innerHTML="",e(a.container).css({zIndex:0,opacity:0}).show(),e(a.container).find("iframe, .galleria-videoicon").remove(),e(i._controls.frames[i._controls.active].container).hide(),e(o.container).css({zIndex:1,left:0,top:0}).show(),i._controls.swap(),i._options.imagePan&&i.addPan(o.image),(s.iframe&&s.image||s.link||i._options.lightbox||i._options.clicknext)&&e(o.image).css({cursor:"pointer"}).on("mouseup",function(o){if(typeof o.which=="number"&&o.which>1)return;if(s.iframe){i.isPlaying()&&i.pause();var u=i._controls.frames[i._controls.active],a=i._stageWidth,f=i._stageHeight;e(u.container).css({width:a,height:f,opacity:0}).show().animate({opacity:1},200),t.setTimeout(function(){u.load(s.iframe+(s.video?"&autoplay=1":""),{width:a,height:f},function(e){i.$("container").addClass("videoplay"),e.scale({width:i._stageWidth,height:i._stageHeight,iframelimit:s.video?i._options.maxVideoSize:r})})},100);return}if(i._options.clicknext&&!n.TOUCH){i._options.pauseOnInteraction&&
i.pause(),i.next();return}if(s.link){i._options.popupLinks?c=t.open(s.link,"_blank"):t.location.href=s.link;return}i._options.lightbox&&i.openLightbox()}),i._playCheck(),i.trigger({type:n.IMAGE,index:f.index,imageTarget:o.image,thumbTarget:l.image,galleriaData:s}),u.shift.call(i._queue),i._queue.stalled=!1,i._queue.length&&i._show()}}(o,l,f,s,h);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(s.index),i._preload(),j.show(l.container),l.isIframe=o.iframe&&!o.image,e(i._thumbnails[s.index].container).addClass("active").siblings(".active").removeClass("active"),i.trigger({type:n.LOADSTART,cached:c,index:s.index,rewind:s.rewind,imageTarget:l.image,thumbTarget:h.image,galleriaData:o}),i._queue.stalled=!0,l.load(a,function(t){var u=e(i._layers[1-i._controls.active]).html(o.layer||"").hide();i._scaleImage(t,{complete:function(t){"image"in f&&j.toggleQuality(f.image,!1),j.toggleQuality(t.image,!1),i.removePan(),i.setInfo(s.index),i.setCounter(s.index),o.layer&&(u.show(),(o.iframe&&o.image||o.link||i._options.lightbox||i._options.clicknext)&&u.css("cursor","pointer").off("mouseup").mouseup(p)),o.video&&o.image&&F(t.container);var a=i._options.transition;e.each({initial:f.image===null,touch:n.TOUCH,fullscreen:i.isFullscreen()},function(e,t){if(t&&i._options[e+"Transition"]!==r)return a=i._options[e+"Transition"],!1});if(a in I.effects==0)d();else{var l={prev:f.container,next:t.container,rewind:s.rewind,speed:i._options.transitionSpeed||400};I.active=!0,I.init.call(i,a,l,d)}i.trigger({type:n.LOADFINISH,cached:c,index:s.index,rewind:s.rewind,imageTarget:t.image,thumbTarget:i._thumbnails[s.index].image,galleriaData:i.getData(s.index)})}})})},getNext:function(e){return e=typeof e=="number"?e:this.getIndex(),e===this.getDataLength()-1?0:e+1},getPrev:function(e){return e=typeof e=="number"?e:this.getIndex(),e===0?this.getDataLength()-1:e-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(e){return e in this._dom?this._dom[e]:null},getData:function(e){return e in this._data?this._data[e]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(e){return typeof e=="undefined"?this._options:this._options[e]},setOptions:function(t,n){return typeof t=="object"?e.extend(this._options,t):this._options[t]=n,this},play:function(e){return this._playing=!0,this._playtime=e||this._playtime,this._playCheck(),this.trigger(n.PLAY),this},pause:function(){return this._playing=!1,this.trigger(n.PAUSE),this},playToggle:function(e){return this._playing?this.pause():this.play(e)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var e=this,t=0,r=20,i=j.timestamp(),s="play"+this._id;if(this._playing){this.clearTimer(s);var o=function(){t=j.timestamp()-i;if(t>=e._playtime&&e._playing){e.clearTimer(s),e.next();return}e._playing&&(e.trigger({type:n.PROGRESS,percent:v.ceil(t/e._playtime*100),seconds:v.floor(t/1e3),milliseconds:t}),e.addTimer(s,o,r))};e.addTimer(s,o,r)}},setPlaytime:function(e){return this._playtime=e,this},setIndex:function(e){return this._active=e,this},setCounter:function(e){typeof e=="number"?e++:typeof e=="undefined"&&(e=this.getIndex()+1),this.get("current").innerHTML=e;if(b){var t=this.$("counter"),n=t.css("opacity");parseInt(n,10)===1?j.removeAlpha(t[0]):this.$("counter").css("opacity",n)}return this},setInfo:function(t){var n=this,r=this.getData(t);return e.each(["title","description"],function(e,t){var i=n.$("info-"+t);r[t]?i[r[t].length?"show":"hide"]().html(r[t]):i.empty().hide()}),this},hasInfo:function(e){var t="title description".split(" "),n;for(n=0;t[n];n++)if(!!this.getData(e)[t[n]])return!0;return!1},jQuery:function(t){var n=this,r=[];e.each(t.split(","),function(t,i){i=e.trim(i),n.get(i)&&r.push(i)});var i=e(n.get(r.shift()));return e.each(r,function(e,t){i=i.add(n.get(t))}),i},$:function(e){return this.jQuery.apply(this,j.array(arguments))}},e.each(x,function(e,t){var r=/_/.test(t)?t.replace(/_/g,""):t;n[t.toUpperCase()]="galleria."+r}),e.extend(n,{IE9:b===9,IE8:b===8,IE7:b===7,IE6:b===6,IE:b,WEBKIT:/webkit/.test(h),CHROME:/chrome/.test(h),SAFARI:/safari/.test(h)&&!/chrome/.test(h),QUIRK:b&&i.compatMode&&i.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(h),IPAD:/ipad/.test(h),ANDROID:/android/.test(h),TOUCH:"ontouchstart"in i&&y}),n.addTheme=function(r){r.name||n.raise("No theme name specified"),(!r.version||parseInt(n.version*10)>parseInt(r.version*10))&&n.raise("This version of Galleria requires "+r.name+" theme version "+parseInt(n.version*10)/10+" or later",!0),typeof r.defaults!="object"?r.defaults={}:r.defaults=T(r.defaults);var i=!1,s,o;return typeof r.css=="string"?(e("link").each(function(e,t){s=new RegExp(r.css);if(s.test(t.href))return i=!0,B(r),!1}),i||e(function(){var u=0,a=function(){e("script").each(function(e,n){s=new RegExp("galleria\\."+r.name.toLowerCase()+"\\."),o=new RegExp("galleria\\.io\\/theme\\/"+r.name.toLowerCase()+"\\/(\\d*\\.*)?(\\d*\\.*)?(\\d*\\/)?js");if(s.test(n.src)||o.test(n.src))i=n.src.replace(/[^\/]*$/,"")+r.css,t.setTimeout(function(){j.loadCSS(i,"galleria-theme-"+r.name,function(){B(r)})},1)}),i||(u++>5?n.raise("No theme CSS loaded"):t.setTimeout(a,500))};a()})):B(r),r},n.loadTheme=function(r,i){if(e("script").filter(function(){return e(this).attr("src")==r}).length)return;var s=!1,o;return e(t).on("load",function(){s||(o=t.setTimeout(function(){s||n.raise("Galleria had problems loading theme at "+r+". Please check theme path or load manually.",!0)},2e4))}),j.loadScript(r,function(){s=!0,t.clearTimeout(o)}),n},n.get=function(e){if(!!M[e])return M[e];if(typeof 
e!="number")return M;n.raise("Gallery index "+e+" not found")},n.configure=function(t,r){var i={};return typeof t=="string"&&r?(i[t]=r,t=i):e.extend(i,t),n.configure.options=i,e.each(n.get(),function(e,t){t.setOptions(i)}),n},n.configure.options={},n.on=function(t,r){if(!t)return;r=r||m;var i=t+r.toString().replace(/\s/g,"")+j.timestamp();return e.each(n.get(),function(e,n){n._binds.push(i),n.bind(t,r)}),n.on.binds.push({type:t,callback:r,hash:i}),n},n.on.binds=[],n.run=function(t,r){return e.isFunction(r)&&(r={extend:r}),e(t||"#galleria").galleria(r),n},n.addTransition=function(e,t){return I.effects[e]=t,n},n.utils=j,n.log=function(){var n=j.array(arguments);if(!("console"in t&&"log"in t.console))return t.alert(n.join("<br>"));try{return t.console.log.apply(t.console,n)}catch(r){e.each(n,function(){t.console.log(this)})}},n.ready=function(t){return typeof t!="function"?n:(e.each(O,function(e,n){t.call(n,n._options)}),n.ready.callbacks.push(t),n)},n.ready.callbacks=[],n.raise=function(t,n){var r=n?"Fatal error":"Error",i={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},s=function(t){var s='<div style="padding:4px;margin:0 0 2px;background:#'+(n?"811":"222")+';">'+(n?"<strong>"+r+": </strong>":"")+t+"</div>";e.each(M,function(){var e=this.$("errors"),t=this.$("target");e.length||(t.css("position","relative"),e=this.addElement("errors").appendChild("target","errors").$("errors").css(i)),e.append(s)}),M.length||e("<div>").css(e.extend(i,{position:"fixed"})).append(s).appendTo(w().body)};if(f){s(t);if(n)throw new Error(r+": "+t)}else if(n){if(_)return;_=!0,n=!1,s("Gallery could not load.")}},n.version=a,n.getLoadedThemes=function(){return e.map(H,function(e){return e.name})},n.requires=function(e,t){return t=t||"You need to upgrade Galleria to version "+e+" to use one or more components.",n.version<e&&n.raise(t,!0),n},n.Picture=function(t){this.id=t||null,this.image=null,this.container=j.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},n.Picture.prototype={cache:{},show:function(){j.show(this.image)},hide:function(){j.moveOut(this.image)},clear:function(){this.image=null},isCached:function(e){return!!this.cache[e]},preload:function(t){e(new Image).on("load",function(e,t){return function(){t[e]=e}}(t,this.cache)).attr("src",t)},load:function(r,i,s){typeof i=="function"&&(s=i,i=null);if(this.isIframe){var o="if"+(new Date).getTime(),u=this.image=e("<iframe>",{src:r,frameborder:0,id:o,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return i&&e(u).css(i),e(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),e("#"+o).on("load",function(n,r){return function(){t.setTimeout(function(){e(n.image).css("visibility","visible"),typeof r=="function"&&r.call(n,n)},10)}}(this,s)),this.container}this.image=new Image,n.IE8&&e(this.image).css("filter","inherit"),!n.IE&&!n.CHROME&&!n.SAFARI&&e(this.image).css("image-rendering","optimizequality");var a=!1,f=!1,l=e(this.container),h=e(this.image),p=function(){a?c?e(this).attr("src",c):n.raise("Image not found: "+r):(a=!0,t.setTimeout(function(e,t){return function(){e.attr("src",t+(t.indexOf("?")>-1?"&":"?")+j.timestamp())}}(e(this),r),50))},d=function(r,s,o){return function(){var u=function(){e(this).off("load"),r.original=i||{height:this.height,width:this.width},n.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),l.append(this),r.cache[o]=o,typeof s=="function"&&t.setTimeout(function(){s.call(r,r)},1)};!this.width||!this.height?function(t){j.wait({until:function(){return t.width&&t.height},success:function(){u.call(t)},error:function(){f?n.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(e(new Image).on("load",d).attr("src",t.src),f=!0)},timeout:100})}(this):u.call(this)}}(this,s,r);return l.find("iframe,img").remove(),h.css("display","block"),j.hide(this.image),e.each("minWidth minHeight maxWidth maxHeight".split(" "),function(e,t){h.css(t,/min/.test(t)?"0":"none")}),h.on("load",d).on("error",p).attr("src",r),this.container},scale:function(t){var i=this;t=e.extend({width:0,height:0,min:r,max:r,margin:0,complete:m,position:"center",crop:!1,canvas:!1,iframelimit:r},t);if(this.isIframe){var s=t.width,o=t.height,u,a;if(t.iframelimit){var f=v.min(t.iframelimit/s,t.iframelimit/o);f<1?(u=s*f,a=o*f,e(this.image).css({top:o/2-a/2,left:s/2-u/2,position:"absolute"})):e(this.image).css({top:0,left:0})}e(this.image).width(u||s).height(a||o).removeAttr("width").removeAttr("height"),e(this.container).width(s).height(o),t.complete.call(i,i);try{this.image.contentWindow&&e(this.image.contentWindow).trigger("resize")}catch(l){}return this.container}if(!this.image)return this.container;var c,h,p=e(i.container),d;return j.wait({until:function(){return c=t.width||p.width()||j.parseValue(p.css("width")),h=t.height||p.height()||j.parseValue(p.css("height")),c&&h},success:function(){var n=(c-t.margin*2)/i.original.width,r=(h-t.margin*2)/i.original.height,s=v.min(n,r),o=v.max(n,r),u={"true":o,width:n,height:r,"false":s,landscape:i.original.width>i.original.height?o:s,portrait:i.original.width<i.original.height?o:s},a=u[t.crop.toString()],f="";t.max&&(a=v.min(t.max,a)),t.min&&(a=v.max(t.min,a)),e.each(["width","height"],function(t,n){e(i.image)[n](i[n]=i.image[n]=v.round(i.original[n]*a))}),e(i.container).width(c).height(h),t.canvas&&D&&(D.elem.width=i.width,D.elem.height=i.height,f=i.image.src+":"+i.width+"x"+i.height,i.image.src=D.cache[f]||function(e){D.context.drawImage(i.image,0,0,i.original.width*a,i.original.height*a);try{return d=D.elem.toDataURL(),D.length+=d.length,D.cache[e]=d,d}catch(t){return i.image.src}}(f));var l={},p={},m=function(t,n,r){var s=0;if(/\%/.test(t)){var o=parseInt(t,10)/100,u=i.image[n]||e(i.image)[n]();s=v.ceil(u*-1*o+r*o)}else s=j.parseValue(t);return s},g={top:{top:0},left:{left:0},right:{left:"100%"},bottom
:{top:"100%"}};e.each(t.position.toLowerCase().split(" "),function(e,t){t==="center"&&(t="50%"),l[e?"top":"left"]=t}),e.each(l,function(t,n){g.hasOwnProperty(n)&&e.extend(p,g[n])}),l=l.top?e.extend(l,p):p,l=e.extend({top:"50%",left:"50%"},l),e(i.image).css({position:"absolute",top:m(l.top,"height",h),left:m(l.left,"width",c)}),i.show(),i.ready=!0,t.complete.call(i,i)},error:function(){n.raise("Could not scale image: "+i.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},galleriaIn:function(e,t,n,r,i){return r*(t/=i)*t+n},galleriaOut:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),n.Finger=function(){var r=v.abs,o=n.HAS3D=function(){var t=i.createElement("p"),n,r=["webkit","O","ms","Moz",""],s,o=0,u="transform";w().html.insertBefore(t,null);for(;r[o];o++)s=r[o]?r[o]+"Transform":u,t.style[s]!==undefined&&(t.style[s]="translate3d(1px,1px,1px)",n=e(t).css(r[o]?"-"+r[o].toLowerCase()+"-"+u:u));return w().html.removeChild(t),n!==undefined&&n.length>0&&n!=="none"}(),u=function(){var e="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+e]||t["moz"+e]||t["o"+e]||t["ms"+e]||function(e){t.setTimeout(e,1e3/60)}}(),a=function(n,r){this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n}},this.easeout=function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n};if(!n.children.length)return;var i=this;e.extend(this.config,r),this.elem=n,this.child=n.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,o||(this.child.style.position="absolute",this.elem.style.position="relative"),e.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(e,t){i[t]=function(e){return function(){e.apply(i,arguments)}}(i[t])}),this.setX=function(){var e=i.child.style;if(!o){e.left=i.pos+"px";return}e.MozTransform=e.webkitTransform=e.transform="translate3d("+i.pos+"px,0,0)";return},e(n).on("touchstart",this.ontouchstart),e(t).on("resize",this.setup),e(t).on("orientationchange",this.setup),this.setup(),function s(){u(s),i.loop.call(i)}()};return a.prototype={constructor:a,setup:function(){this.width=e(this.elem).width(),this.length=v.ceil(e(this.child).width()/this.width),this.index!==0&&(this.index=v.max(0,v.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(e){this.pos=e,this.to=e},ontouchstart:function(e){var t=e.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+(new Date)},this.isScrolling=null,this.touching=!0,this.deltaX=0,s.on("touchmove",this.ontouchmove),s.on("touchend",this.ontouchend)},ontouchmove:function(e){var t=e.originalEvent.touches;if(t&&t.length>1||e.scale&&e.scale!==1)return;this.deltaX=t[0].pageX-this.start.pageX,this.isScrolling===null&&(this.isScrolling=!!(this.isScrolling||v.abs(this.deltaX)<v.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(e.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?v.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),e.stopPropagation()},ontouchend:function(e){this.touching=!1;var t=+(new Date)-this.start.time<250&&v.abs(this.deltaX)>40||v.abs(this.deltaX)>this.width/2,n=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(t&&!n?this.deltaX<0?1:-1:0)),s.off("touchmove",this.ontouchmove),s.off("touchend",this.ontouchend)},show:function(e){e!=this.index?this.config.onchange.call(this,e):this.to=-(e*this.width)},moveTo:function(e){e!=this.index&&(this.pos=this.to=-(e*this.width),this.index=e)},loop:function(){var e=this.to-this.pos,t=1;this.width&&e&&(t=v.max(.5,v.min(1.5,v.abs(e/this.width))));if(this.touching||v.abs(e)<=1)this.pos=this.to,e=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+(new Date),distance:e,factor:t,destination:this.to});var n=+(new Date)-this.anim.time,r=this.config.duration*this.anim.factor;if(n>r||this.anim.destination!=this.to){this.anim=0,this.easing=this.easeout;return}this.pos=this.easing(null,n,this.anim.start,this.anim.distance,r)}this.setX()}},a}(),e.fn.galleria=function(t){var r=this.selector;return e(this).length?this.each(function(){e.data(this,"galleria")&&(e.data(this,"galleria").destroy(),e(this).find("*").hide()),e.data(this,"galleria",(new n).init(this,t))}):(e(function(){e(r).length?e(r).galleria(t):n.utils.wait({until:function(){return e(r).length},success:function(){e(r).galleria(t)},error:function(){n.raise('Init failed: Galleria could not find the element "'+r+'".')},timeout:5e3})}),this)},typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=n:(t.Galleria=n,typeof define=="function"&&define.amd&&define("galleria",["jquery"],function(){return n}))}(jQuery,this);
